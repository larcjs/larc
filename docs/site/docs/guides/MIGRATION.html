<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LARC Migration Guide · PAN Documentation</title>
  <meta name="description" content="PAN (Page Area Network) Documentation - LARC Migration Guide">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/theme.css">
  <link rel="stylesheet" href="../assets/docs.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" integrity="sha384-wH75j6z1lH97ZOpMOInqhgKzFkAInZPPSPlZpYKYTOqsaizPvhQZmAtLcPKXpLyH" crossorigin="anonymous">
</head>
<body>
  <header class="docs-header">
    <div class="docs-header-content">
      <a href="../index.html" class="logo">
        <span>PAN</span>
      </a>
      <nav class="docs-nav">
        <a href="../index.html">Home</a>
        <a href="index.html" class="active">Docs</a>
        <a href="../examples.html">Examples</a>
        <a href="../apps.html">Apps</a>
        <a href="https://github.com/chrisrobison/pan" target="_blank">GitHub</a>
      </nav>
    </div>
  </header>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <div class="docs-sidebar-content">
        <h3>Documentation</h3>
        <nav class="docs-menu" id="docs-menu">
          <!-- Will be populated by JavaScript -->
        </nav>
      </div>
    </aside>

    <main class="docs-main">
      <div class="docs-breadcrumb">
        <a href="../index.html">Home</a> / <a href="#">guides</a> / <span>MIGRATION</span>
      </div>
      <article class="docs-content">
        <h1>LARC Migration Guide</h1>
<strong>Document Version:</strong> 1.0
<strong>Last Updated:</strong> November 24, 2024
<strong>Applies To:</strong> All LARC package migrations
<hr>
<h2>Introduction</h2>
<p>This guide helps you migrate between major versions of LARC packages. LARC follows <a href="SEMVER.md">Semantic Versioning</a>, which means:</p>
<ul><li><strong>PATCH updates (1.0.x)</strong> - Safe to update, no changes needed</li>
<li><strong>MINOR updates (1.x.0)</strong> - Safe to update, new features are opt-in</li>
<li><strong>MAJOR updates (x.0.0)</strong> - May require code changes</li>
</ul>
<hr>
<h2>Quick Migration Index</h2>
<p>| From Version | To Version | Migration Needed | Read Section |
|--------------|------------|------------------|--------------|
| 0.x | 1.0.x | ✅ No breaking changes | <a href="#migrating-from-0x-to-10x">0.x → 1.0</a> |
| 1.0.x | 1.0.y | ✅ No changes needed | N/A (PATCH update) |
| 1.x | 1.y | ✅ No changes needed | N/A (MINOR update) |
| 1.x | 2.0 | ⚠️ Not released yet | N/A |</p>
<hr>
<h2>Migrating from 0.x to 1.0.x</h2>
<h3>Overview</h3>
<strong>Good News:</strong> LARC 1.0 introduces <strong>zero breaking changes</strong> to the core APIs. If you're using 0.x, you can upgrade to 1.0.x safely.
<strong>Status:</strong> ✅ Fully backward compatible
<h3>What Changed in 1.0</h3>
<p>#### Added (Non-Breaking)
<ul><li>Component autoload system (opt-in)</li>
<li>Router and navigation components</li>
<li>WebSocket bridge component</li>
<li>IndexedDB bridge component</li>
<li>New UI components</li>
<li>Comprehensive test suite (80%+ coverage)</li>
<li>Performance benchmarks (300k+ msg/sec)</li>
<li>Production documentation</li>
</ul>
#### Improved (Non-Breaking)
<ul><li>Enhanced error handling</li>
<li>Better memory management</li>
<li>Improved TypeScript support</li>
<li>Extended browser compatibility documentation</li>
</ul>
#### Fixed (Non-Breaking)
<ul><li>PAN bus delivery with document listeners</li>
<li>Message delivery race conditions</li>
<li>Path resolution in autoloader</li>
<li>Retained message subscription loop</li>
</ul>
<h3>Migration Steps</h3></p>
<p>#### Step 1: Update Package Version</p>
<pre><code class="language-bash"># npm
npm install @larcjs/core@^1.0.0

# yarn
yarn add @larcjs/core@^1.0.0

# pnpm
pnpm add @larcjs/core@^1.0.0</code></pre>
<p>#### Step 2: Test Your Application</p>
<p>Even though there are no breaking changes, run your test suite:</p>
<pre><code class="language-bash">npm test</code></pre>
<p>#### Step 3: Optional - Adopt New Features</p>
<p>Consider adopting these new 1.0 features:</p>
<p>##### Autoloader (Recommended)
<pre><code class="language-html">&lt;!-- Before (0.x): Manual imports --&gt;
&lt;script type=&quot;module&quot;&gt;
  import &#039;./components/pan-bus.mjs&#039;;
  import &#039;./components/pan-client.mjs&#039;;
&lt;/script&gt;

&lt;!-- After (1.0): Automatic loading --&gt;
&lt;script type=&quot;module&quot;&gt;
  import &#039;@larcjs/core/pan.mjs&#039;;
&lt;/script&gt;
&lt;pan-bus&gt;&lt;/pan-bus&gt;
&lt;pan-client&gt;&lt;/pan-client&gt;
&lt;!-- Components load automatically when needed --&gt;</code></pre></p>
<p>##### Enhanced Client API
<pre><code class="language-javascript">// Before (0.x): Still works in 1.0
const client = new PanClient();
await client.ready();

// After (1.0): New convenience methods
const data = await client.request(&#039;user.get&#039;, { id: 123 }, { timeout: 5000 });
const retained = await client.retained([&#039;app.state.*&#039;]);</code></pre></p>
<h3>Compatibility Notes</h3>
<p>#### What Remains Compatible</p>
<p>✅ <strong>All core APIs unchanged:</strong>
<ul><li><code>PanBus</code> component and configuration</li>
<li><code>PanClient</code> methods (publish, subscribe, request)</li>
<li>PAN message envelope format</li>
<li>Topic naming conventions</li>
<li>CustomEvent names (pan:publish, pan:deliver, etc.)</li>
<li>Configuration via attributes and window.panAutoload</li>
</ul>
✅ <strong>All existing code works:</strong>
<pre><code class="language-javascript">// 0.x code still works perfectly in 1.0
document.addEventListener(&#039;pan:deliver&#039;, (e) =&gt; {
  const { topic, data } = e.detail;
  // This still works exactly as before
});

document.dispatchEvent(new CustomEvent(&#039;pan:publish&#039;, {
  detail: { topic: &#039;test.topic&#039;, data: { message: &#039;hello&#039; } },
  bubbles: true
}));</code></pre></p>
<p>#### What's New (Opt-In)</p>
<p>The following features are <strong>new in 1.0</strong> but completely <strong>opt-in</strong>:</p>
<ul><li><strong>Autoloader:</strong> Only activates if you import <code>pan.mjs</code></li>
<li><strong>Router:</strong> Only if you use <code><pan-router></code> component</li>
<li><strong>WebSocket bridge:</strong> Only if you use <code><pan-websocket></code></li>
<li><strong>IndexedDB bridge:</strong> Only if you use <code><pan-idb></code></li>
</ul>
<h3>Known Issues</h3>
<li><strong>Browser Support (1.0.0-1.0.2)</strong></li>
   - Limited testing on Firefox, Safari, mobile browsers
   - Core APIs use standard DOM, should work everywhere
   - Full browser compatibility matrix: <a href="BROWSER-COMPATIBILITY.md">BROWSER-COMPATIBILITY.md</a>
<li><strong>UI Components</strong></li>
   - All core components security-audited and production-ready
   - Browser compatibility testing ongoing
<h3>Rollback Plan</h3>
<p>If you encounter issues (unlikely), rolling back is simple:</p>
<pre><code class="language-bash"># Rollback to 0.x
npm install @larcjs/core@0.1.0

# Or pin to last working version
npm install @larcjs/core@3.0.1</code></pre>
<p>No code changes needed for rollback - APIs are fully compatible.</p>
<hr>
<h2>Migrating from 1.x to 2.0</h2>
<strong>Status:</strong> ⚠️ Not yet released
<p>LARC 2.0 has not been released yet. When it is, this section will document:
<ul><li>Breaking changes introduced</li>
<li>Step-by-step migration instructions</li>
<li>Deprecation timeline for old APIs</li>
<li>Automated migration tools (if available)</li>
</ul>
<strong>Stay Updated:</strong>
<ul><li>Watch the <a href="https://github.com/larcjs/core/releases">GitHub releases</a></li>
<li>Review <a href="../core/CHANGELOG.md">CHANGELOG.md</a> for release notes</li>
<li>Check <a href="SEMVER.md">SEMVER.md</a> for versioning policy</li>
</ul>
<hr></p>
<h2>Package-Specific Migrations</h2>
<h3>@larcjs/core</h3>
<p>#### Current Status (v1.0.x)
<ul><li><strong>Stability:</strong> HIGH - Core APIs are locked</li>
<li><strong>Breaking Changes:</strong> None since 1.0.0</li>
<li><strong>Deprecations:</strong> None</li>
</ul>
#### Deprecated APIs
No APIs are currently deprecated. When APIs are deprecated:
<li>They will continue working with console warnings</li>
<li>Deprecation will last at least 1 MAJOR version (6 months minimum)</li>
<li>Migration path will be documented here</li></p>
<h3>@larcjs/ui</h3>
<p>#### Current Status (v1.0.x)
<ul><li><strong>Stability:</strong> MEDIUM - Components evolve more frequently</li>
<li><strong>Breaking Changes:</strong> None since 1.0.0</li>
<li><strong>Deprecations:</strong> None</li>
</ul>
#### Component-Specific Notes
<ul><li>All UI components follow the same core messaging patterns</li>
<li>Component tag names are stable once released</li>
<li>New components added in MINOR versions (backward compatible)</li>
</ul>
<hr></p>
<h2>General Migration Best Practices</h2>
<h3>Before You Migrate</h3>
<li><strong>Read the Release Notes</strong></li>
   - Review <a href="../core/CHANGELOG.md">CHANGELOG.md</a> for the target version
   - Look for "Breaking Changes" section
   - Check deprecation notices
<li><strong>Review Dependencies</strong></li>
   <pre><code class="language-bash">npm outdated</code></pre>
<li><strong>Check Compatibility Matrix</strong></li>
   - Core package compatibility: <a href="SEMVER.md#version-compatibility-matrix">SEMVER.md</a>
   - Browser compatibility: <a href="BROWSER-COMPATIBILITY.md">BROWSER-COMPATIBILITY.md</a>
<h3>During Migration</h3>
<li><strong>Create a Feature Branch</strong></li>
   <pre><code class="language-bash">git checkout -b upgrade-larc-2.0</code></pre>
<li><strong>Update One Package at a Time</strong></li>
   <pre><code class="language-bash"># Update core first
   npm install @larcjs/core@3.0.1
   npm test

   # Then update UI
   npm install @larcjs/ui@3.0.1
   npm test</code></pre>
<li><strong>Run Your Test Suite</strong></li>
   <pre><code class="language-bash">npm test
   npm run test:integration</code></pre>
<li><strong>Test in Development Environment</strong></li>
   - Deploy to staging/dev environment
   - Perform manual testing
   - Check browser console for warnings
<li><strong>Monitor Deprecation Warnings</strong></li>
   <pre><code class="language-javascript">// Look for warnings in console
   console.warn(&#039;oldMethod() is deprecated, use newMethod()&#039;);</code></pre>
<h3>After Migration</h3>
<li><strong>Update Your Code</strong></li>
   - Replace deprecated APIs with new ones
   - Follow examples in this guide
<li><strong>Update Documentation</strong></li>
   - Update your project's README
   - Update internal docs
   - Update code comments
<li><strong>Deploy Gradually</strong></li>
   - Canary deployment (5% traffic)
   - Staging environment testing
   - Gradual rollout to production
   - Monitor error rates
<hr>
<h2>Breaking Change Reference</h2>
<h3>Format</h3>
<p>Each breaking change will be documented using this format:</p>
<p>#### Change Title</p>
<strong>Version:</strong> When the change was introduced
<strong>Impact:</strong> LOW / MEDIUM / HIGH
<strong>Effort:</strong> Minutes / Hours / Days
<strong>What Changed:</strong>
<ul><li>Description of the breaking change</li>
<li>Why the change was made</li>
</ul>
<strong>Before (Old Code):</strong>
<pre><code class="language-javascript">// Old API that no longer works</code></pre>
<strong>After (New Code):</strong>
<pre><code class="language-javascript">// New API to use instead</code></pre>
<strong>Migration Steps:</strong>
<li>Step-by-step instructions</li>
<li>With code examples</li>
<li>And test verification</li>
<h3>Example (Template for Future Releases)</h3>
<p>#### Renamed PanClient.subscribe() to PanClient.on()</p>
<strong>Version:</strong> 2.0.0 (hypothetical example)
<strong>Impact:</strong> HIGH
<strong>Effort:</strong> 30 minutes
<strong>What Changed:</strong>
<ul><li><code>subscribe()</code> method renamed to <code>on()</code> for consistency with EventEmitter pattern</li>
<li><code>unsubscribe()</code> renamed to <code>off()</code></li>
</ul>
<strong>Before (v1.x):</strong>
<pre><code class="language-javascript">const client = new PanClient();
const unsub = client.subscribe(&#039;user.*&#039;, (msg) =&gt; {
  console.log(msg.data);
});

// Later...
unsub();</code></pre>
<strong>After (v2.x):</strong>
<pre><code class="language-javascript">const client = new PanClient();
const off = client.on(&#039;user.*&#039;, (msg) =&gt; {
  console.log(msg.data);
});

// Later...
off();</code></pre>
<strong>Migration Steps:</strong>
<li>Find all <code>subscribe()</code> calls: <code>grep -r "\.subscribe\(" src/</code></li>
<li>Replace with <code>on()</code>: <code>sed -i 's/\.subscribe(/\.on(/g' src/<em>*/</em>.js</code></li>
<li>Replace <code>unsubscribe()</code> with <code>off()</code></li>
<li>Run tests: <code>npm test</code></li>
<strong>Automated Migration:</strong>
<pre><code class="language-bash"># Run migration script (if provided)
npx @larcjs/migrate 1.x-to-2.x</code></pre>
<hr>
<h2>Deprecation Timeline</h2>
<h3>Current Deprecations</h3>
<strong>Status:</strong> No APIs are currently deprecated in v1.x
<h3>How Deprecations Work</h3>
<p>When an API is deprecated, this section will show:</p>
<p>| API | Deprecated In | Removed In | Replacement | Migration Guide |
|-----|---------------|------------|-------------|-----------------|
| (none yet) | - | - | - | - |</p>
<strong>Example (for future deprecations):</strong>
<p>| API | Deprecated In | Removed In | Replacement | Migration Guide |
|-----|---------------|------------|-------------|-----------------|
| <code>subscribe()</code> | 1.5.0 | 3.0.1 | <code>on()</code> | <a href="#example-change">Link</a> |</p>
<hr>
<h2>Automated Migration Tools</h2>
<h3>Current Tools</h3>
<strong>Status:</strong> No automated migration tools yet (none needed - no breaking changes)
<h3>Future Tools</h3>
<p>When LARC 2.0 is released with breaking changes, we plan to provide:</p>
<pre><code class="language-bash"># Automated migration (planned for 2.0)
npx @larcjs/migrate 1.x-to-2.x

# Options
npx @larcjs/migrate 1.x-to-2.x --dry-run  # Preview changes
npx @larcjs/migrate 1.x-to-2.x --interactive  # Choose which changes to apply</code></pre>
<hr>
<h2>Version-Specific Guides</h2>
<h3>0.x → 1.0.x ✅ COMPLETE</h3>
See <a href="#migrating-from-0x-to-10x">Migrating from 0.x to 1.0.x</a> above.
<h3>1.x → 2.0 ⚠️ NOT RELEASED</h3>
Not yet available. Check back when LARC 2.0 is announced.
<hr>
<h2>Getting Help</h2>
<h3>Migration Support</h3>
<p>If you encounter issues during migration:</p>
<li><strong>Check Documentation:</strong></li>
   - <a href="../reference/API-REFERENCE.md">API Reference</a>
   - <a href="TROUBLESHOOTING.md">Troubleshooting Guide</a>
   - <a href="../core/CHANGELOG.md">CHANGELOG</a>
<li><strong>Search Issues:</strong></li>
   - <a href="https://github.com/larcjs/core/issues">GitHub Issues</a>
   - Search for your error message
<li><strong>Ask for Help:</strong></li>
   - <a href="https://github.com/larcjs/core/discussions">GitHub Discussions</a>
   - Tag: <code>migration</code>, <code>help-wanted</code>
<li><strong>Report Migration Problems:</strong></li>
   <pre><code class="language-markdown">**Title:** Migration issue: [describe problem]

   **Migrating from:** 1.x.x
   **Migrating to:** 2.0.0

   **Error:**
   [paste error message]

   **Code:**
   [paste relevant code]

   **Expected:** What you expected to happen
   **Actual:** What actually happened</code></pre>
<h3>Version Support Policy</h3>
<ul><li><strong>Current MAJOR:</strong> Full support (bug fixes, security updates, features)</li>
<li><strong>Previous MAJOR:</strong> Critical bug fixes and security updates for 6 months</li>
<li><strong>Older versions:</strong> Community support only</li>
</ul>
<strong>Example (as of v1.0.x):</strong>
<ul><li>v1.x: Full support ✅</li>
<li>v0.x: Critical fixes for 6 months (until May 2025) ⏰</li>
<li>Earlier: Community only ⚠️</li>
</ul>
<hr>
<h2>Migration Checklist</h2>
<p>Use this checklist when performing any major version migration:</p>
<h3>Pre-Migration</h3>
<ul><li>[ ] Read CHANGELOG.md for target version</li>
<li>[ ] Read this migration guide</li>
<li>[ ] Check browser compatibility requirements</li>
<li>[ ] Review deprecation notices</li>
<li>[ ] Create git feature branch</li>
<li>[ ] Backup production database (if applicable)</li>
<li>[ ] Set up rollback plan</li>
</ul>
<h3>Migration</h3>
<ul><li>[ ] Update package.json dependencies</li>
<li>[ ] Run <code>npm install</code></li>
<li>[ ] Run automated migration tools (if available)</li>
<li>[ ] Update code following migration guide</li>
<li>[ ] Fix deprecation warnings</li>
<li>[ ] Run test suite</li>
<li>[ ] Test in development environment</li>
<li>[ ] Test critical user flows manually</li>
</ul>
<h3>Post-Migration</h3>
<ul><li>[ ] Update documentation</li>
<li>[ ] Deploy to staging environment</li>
<li>[ ] Perform QA testing</li>
<li>[ ] Monitor error logs</li>
<li>[ ] Canary deployment (5% traffic)</li>
<li>[ ] Gradual rollout to 100%</li>
<li>[ ] Monitor performance metrics</li>
<li>[ ] Update internal runbooks</li>
</ul>
<hr>
<h2>FAQ</h2>
<h3>Do I need to migrate from 0.x to 1.0?</h3>
<strong>Answer:</strong> No, but it's recommended. LARC 1.0 is backward compatible, but adds significant improvements:
<ul><li>80%+ test coverage</li>
<li>Performance benchmarks (300k+ msg/sec)</li>
<li>Production-ready documentation</li>
<li>Security audit completed</li>
<li>New opt-in features</li>
</ul>
<h3>Will my 0.x code break in 1.0?</h3>
<strong>Answer:</strong> No. All core APIs remain compatible. You can upgrade with zero code changes.
<h3>How long will 0.x be supported?</h3>
<strong>Answer:</strong> Critical bug fixes and security updates for 6 months after 1.0 release (until May 2025).
<h3>Can I use new 1.0 features in 0.x?</h3>
<strong>Answer:</strong> No. New features require 1.0. But upgrading is safe and requires no code changes.
<h3>What if I find a breaking change not documented here?</h3>
<strong>Answer:</strong> Please report it immediately:
<li>Open a GitHub issue</li>
<li>Tag it with <code>bug</code> and <code>breaking-change</code></li>
<li>We'll investigate within 48 hours</li>
<li>If confirmed, we'll issue a hotfix</li>
<h3>How do I stay informed about upcoming breaking changes?</h3>
<strong>Answer:</strong>
<ul><li>Watch <a href="https://github.com/larcjs/core/releases">GitHub Releases</a></li>
<li>Subscribe to deprecation warnings in your console</li>
<li>Join <a href="https://github.com/larcjs/core/discussions">GitHub Discussions</a></li>
<li>Read CHANGELOG.md with each update</li>
</ul>
<hr>
<h2>Document History</h2>
<p>| Version | Date | Changes |
|---------|------|---------|
| 1.0 | Nov 24, 2024 | Initial migration guide with 0.x → 1.0.x guide |</p>
<hr>
<h2>See Also</h2>
<ul><li><a href="../specs/SEMVER.md">Semantic Versioning Commitment</a></li>
<li><a href="../reference/API-REFERENCE.md">API Reference</a></li>
<li><a href="TROUBLESHOOTING.md">Troubleshooting Guide</a></li>
<li><a href="PRODUCTION-DEPLOYMENT.md">Production Deployment Guide</a></li>
<li><a href="../core/CHANGELOG.md">CHANGELOG</a></li>
</ul>
<hr>
<strong>Questions?</strong> Open an issue or discussion on GitHub: https://github.com/larcjs/core
      </article>
      <footer class="docs-footer">
        <a href="https://github.com/chrisrobison/pan/edit/main/guides/MIGRATION.md" target="_blank">
          Edit this page on GitHub
        </a>
      </footer>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha384-F/bZzf7p3Joyp5psL90p/p89AZJsndkSoGwRpXcZhleCWhd8SnRuoYo4d0yirjJp" crossorigin="anonymous"></script>
  <script src="../assets/docs.js"></script>
</body>
</html>