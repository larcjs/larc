<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Toolbar Badges for Non-UI Components Â· PAN Documentation</title>
  <meta name="description" content="PAN (Page Area Network) Documentation - Toolbar Badges for Non-UI Components">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/theme.css">
  <link rel="stylesheet" href="../assets/docs.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" integrity="sha384-wH75j6z1lH97ZOpMOInqhgKzFkAInZPPSPlZpYKYTOqsaizPvhQZmAtLcPKXpLyH" crossorigin="anonymous">
</head>
<body>
  <header class="docs-header">
    <div class="docs-header-content">
      <a href="../index.html" class="logo">
        <span>PAN</span>
      </a>
      <nav class="docs-nav">
        <a href="../index.html">Home</a>
        <a href="index.html" class="active">Docs</a>
        <a href="../examples.html">Examples</a>
        <a href="../apps.html">Apps</a>
        <a href="https://github.com/chrisrobison/pan" target="_blank">GitHub</a>
      </nav>
    </div>
  </header>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <div class="docs-sidebar-content">
        <h3>Documentation</h3>
        <nav class="docs-menu" id="docs-menu">
          <!-- Will be populated by JavaScript -->
        </nav>
      </div>
    </aside>

    <main class="docs-main">
      <div class="docs-breadcrumb">
        <a href="../index.html">Home</a> / <a href="#">playground</a> / <span>TOOLBAR_BADGES_FIX</span>
      </div>
      <article class="docs-content">
        <h1>Toolbar Badges for Non-UI Components</h1>
<h2>Problem</h2>
<p>Non-UI components (like <code>pan-data-connector</code>, <code>pan-store</code>, <code>pan-bus</code>, etc.) were being rendered as full-width blocks in the canvas, taking up space and cluttering the preview area. This made the canvas feel messy and confusing.</p>
<h2>Solution</h2>
<p>Move non-UI component badges to the <strong>canvas toolbar</strong>, alongside the viewport switcher and Clear All button. They now appear as small, clickable badges that:
<ul><li>Don't clutter the canvas</li>
<li>Are always visible for selection</li>
<li>Show what infrastructure components are active</li>
<li>Can be clicked to open their properties</li>
</ul>
<h2>Visual Layout</h2></p>
<h3>Before</h3>
<pre><code class="language-plaintext">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Clear All]          [Desktop â–¼]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“¦ Data Connector           â”‚   â”‚
â”‚  â”‚ REST data connector for...  â”‚   â”‚
â”‚  â”‚ Configure in properties â†’   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Card Title                  â”‚   â”‚
â”‚  â”‚ Card content...             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3>After</h3>
<pre><code class="language-plaintext">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Clear All] [ğŸ“¦ Data Connector]  [Desktop â–¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Card Title                         â”‚     â”‚
â”‚  â”‚ Card content...                    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h2>Changes Made</h2>
<h3>1. Updated Canvas Toolbar (<code>pg-canvas.mjs</code>)</h3>
<strong>Modified HTML structure:</strong>
<pre><code class="language-javascript">&lt;div class=&quot;canvas-toolbar&quot;&gt;
  &lt;div class=&quot;toolbar-left&quot;&gt;
    &lt;button class=&quot;btn-clear&quot;&gt;Clear All&lt;/button&gt;
    &lt;div class=&quot;non-ui-badges&quot; id=&quot;non-ui-badges&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;select class=&quot;viewport-size&quot;&gt;...&lt;/select&gt;
&lt;/div&gt;</code></pre>
<strong>Added badge management methods:</strong>
<pre><code class="language-javascript">addNonUIBadge(element, componentMeta) {
  // Creates badge in toolbar
  const badge = document.createElement(&#039;div&#039;);
  badge.className = &#039;non-ui-badge&#039;;
  badge.textContent = `${componentMeta.icon} ${componentMeta.displayName}`;
  badge.dataset.componentId = element.dataset.componentId;

  // Click to select component
  badge.addEventListener(&#039;click&#039;, () =&gt; {
    this.selectComponent(element);
  });

  badgeContainer.appendChild(badge);
}

removeNonUIBadge(componentId) {
  // Removes badge when component is deleted
}</code></pre>
<strong>Modified <code>addComponent</code> method:</strong>
<ul><li>Non-UI components are still added to DOM (for functionality)</li>
<li>But they're hidden with <code>element.style.display = 'none'</code></li>
<li>A badge is added to the toolbar instead</li>
<li>UI components work as before</li>
</ul>
<h3>2. Added CSS Styles (<code>playground.css</code>)</h3>
<strong>Toolbar layout:</strong>
<pre><code class="language-css">.toolbar-left {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex: 1;
}

.non-ui-badges {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}</code></pre>
<strong>Badge styling:</strong>
<pre><code class="language-css">.non-ui-badge {
  display: inline-flex;
  align-items: center;
  padding: 0.375rem 0.75rem;
  background: #667eea;
  color: white;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.non-ui-badge:hover {
  background: #5568d3;
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
}</code></pre>
<h3>3. Updated Methods to Handle Badges</h3>
<strong><code>clearAll()</code>:</strong>
<ul><li>Now clears badges from toolbar</li>
<li>Resets badge container to empty</li>
</ul>
<strong><code>loadExample()</code>:</strong>
<ul><li>Checks if component is non-UI</li>
<li>Adds badge to toolbar for infrastructure components</li>
<li>Hides the actual element in canvas</li>
</ul>
<h2>How It Works</h2>
<h3>Adding a Non-UI Component</h3>
<li>User clicks component in palette (e.g., <code>pan-data-connector</code>)</li>
<li>Component is created and added to DOM (hidden)</li>
<li>Badge is added to toolbar with icon and name</li>
<li>Component is selected (shows properties panel)</li>
<li>Canvas stays clean!</li>
<h3>Selecting a Non-UI Component</h3>
<li>Click the badge in the toolbar</li>
<li>Component is selected</li>
<li>Properties panel shows on the right</li>
<li>You can edit all attributes</li>
<h3>Component Categories</h3>
<strong>Non-UI (shown as badges):</strong>
<ul><li><code>state</code> - State management (pan-store, pan-computed-state)</li>
<li><code>routing</code> - Router components (pan-router)</li>
<li><code>data</code> - Data connectors (pan-data-connector, pan-graphql-connector)</li>
<li><code>devtools</code> - Developer tools (pan-bus-monitor)</li>
<li><code>advanced</code> - Advanced utilities (pan-offline-sync, pan-schema-validator)</li>
<li><code>auth</code> - Authentication (pan-auth, pan-jwt)</li>
</ul>
<strong>UI (shown in canvas):</strong>
<ul><li><code>ui</code> - Visual components (pan-card, pan-button)</li>
<li><code>forms</code> - Form elements (pan-form, pan-input)</li>
<li><code>content</code> - Content display (pan-tabs, pan-modal)</li>
</ul>
<h2>Benefits</h2>
<p>âœ… <strong>Clean canvas</strong> - Only UI components visible in preview
âœ… <strong>Always accessible</strong> - Badges visible at top, easy to click
âœ… <strong>Compact display</strong> - Multiple infrastructure components don't clutter
âœ… <strong>Visual indicator</strong> - See what infrastructure is active at a glance
âœ… <strong>Functional</strong> - Components still work (hidden but mounted in DOM)
âœ… <strong>Consistent UX</strong> - Toolbar pattern familiar from dev tools</p>
<h2>Examples</h2>
<h3>Data Flow Example</h3>
<pre><code class="language-plaintext">Toolbar: [Clear All] [ğŸ“¦ Data Connector] [Desktop â–¼]
Canvas:  Only shows the data table (UI component)</code></pre>
<h3>Complex App</h3>
<pre><code class="language-plaintext">Toolbar: [Clear All] [ğŸ“¦ Data Connector] [ğŸ” Auth] [ğŸ“ Router] [Desktop â–¼]
Canvas:  Shows cards, forms, tables, buttons (UI components)</code></pre>
<h2>Testing</h2>
<li><strong>Start playground:</strong></li>
   <pre><code class="language-bash">cd playground
   python3 -m http.server 8080
   open http://localhost:8080/</code></pre>
<li><strong>Load "Data Flow" example:</strong></li>
   - Should see <code>ğŸ“¦ Data Connector</code> badge in toolbar
   - Canvas only shows the table
   - Click badge to select data connector
   - Properties panel shows on right
<li><strong>Add more components:</strong></li>
   - Add <code>pan-store</code> (state) â†’ badge in toolbar
   - Add <code>pan-auth</code> (auth) â†’ badge in toolbar
   - Add <code>pan-card</code> (ui) â†’ appears in canvas
   - Add <code>pan-button</code> (ui) â†’ appears in canvas
<li><strong>Verify:</strong></li>
   - Toolbar shows all infrastructure badges
   - Canvas only shows UI components
   - Clicking badges selects component
   - Properties panel works for all components
<h2>Future Enhancements</h2>
<ul><li>Add X button on badges to remove component</li>
<li>Add color coding by category (data=blue, auth=red, state=green)</li>
<li>Add tooltip with full description on hover</li>
<li>Add drag-to-reorder badges</li>
<li>Add "Infrastructure" section header above badges</li>
</ul>
      </article>
      <footer class="docs-footer">
        <a href="https://github.com/chrisrobison/pan/edit/main/playground/TOOLBAR_BADGES_FIX.md" target="_blank">
          Edit this page on GitHub
        </a>
      </footer>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha384-F/bZzf7p3Joyp5psL90p/p89AZJsndkSoGwRpXcZhleCWhd8SnRuoYo4d0yirjJp" crossorigin="anonymous"></script>
  <script src="../assets/docs.js"></script>
</body>
</html>