<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Getting Started · PAN Documentation</title>
  <meta name="description" content="PAN (Page Area Network) Documentation - Getting Started">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/theme.css">
  <link rel="stylesheet" href="../assets/docs.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" integrity="sha384-wH75j6z1lH97ZOpMOInqhgKzFkAInZPPSPlZpYKYTOqsaizPvhQZmAtLcPKXpLyH" crossorigin="anonymous">
</head>
<body>
  <header class="docs-header">
    <div class="docs-header-content">
      <a href="../index.html" class="logo">
        <span>PAN</span>
      </a>
      <nav class="docs-nav">
        <a href="../index.html">Home</a>
        <a href="index.html" class="active">Docs</a>
        <a href="../examples.html">Examples</a>
        <a href="../apps.html">Apps</a>
        <a href="https://github.com/chrisrobison/pan" target="_blank">GitHub</a>
      </nav>
    </div>
  </header>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <div class="docs-sidebar-content">
        <h3>Documentation</h3>
        <nav class="docs-menu" id="docs-menu">
          <!-- Will be populated by JavaScript -->
        </nav>
      </div>
    </aside>

    <main class="docs-main">
      <div class="docs-breadcrumb">
        <a href="../index.html">Home</a> / <a href="#">books</a> / <a href="#">building-with-larc</a> / <span>chapter-05-getting-started</span>
      </div>
      <article class="docs-content">
        <h1>Getting Started</h1>
<p>Welcome to the hands-on portion of <em>Building with LARC</em>. This chapter takes you from zero to running code in minutes—no elaborate setup, no dependency nightmares, just a browser, a text editor, and a way to serve static files.</p>
<p>If you've worked with modern JavaScript frameworks, you might be bracing yourself for the usual ritual: install Node.js, run npm install, wait for 1,400 packages to download, configure webpack, debug build errors, and finally write your first line of application code. LARC skips all of that. You'll have a working application before you finish reading this chapter.</p>
<p>This isn't a toy example or a contrived demo. We'll build something real: a task manager with multiple components, PAN bus messaging, persistent storage, and proper error handling. By the end, you'll understand LARC's development workflow and be ready to build your own applications.</p>
<h2>Prerequisites</h2>
<p>This chapter assumes you have the prerequisites covered in Chapter 1. The short version: a modern browser, a text editor, and a way to serve static files. That's it — no Node.js, no npm, no build tools required.</p>
<blockquote><strong>TIP</strong>: If you need to set up a local server quickly, <code>python3 -m http.server 8000</code> works on most systems with Python installed.</blockquote>
<h2>Installation Options</h2>
<p>LARC offers multiple installation paths. Choose the one that matches your workflow and project requirements.</p>
<h3>Option 1: CDN (Fastest for Testing)</h3>
<p>The quickest way to try LARC is loading it directly from a CDN. This is perfect for experiments, prototypes, and learning.</p>
<p>Create a file called <code>index.html</code>:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;LARC Quick Start&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- Load LARC from CDN --&gt;
  &lt;script type=&quot;module&quot; src=&quot;https://unpkg.com/@larcjs/core@2.0.0/src/pan.mjs&quot;&gt;&lt;/script&gt;

  &lt;!-- PAN bus is automatically instantiated --&gt;

  &lt;!-- Use components declaratively --&gt;
  &lt;pan-card title=&quot;Hello LARC&quot;&gt;
    &lt;p&gt;This component loaded automatically from the CDN.&lt;/p&gt;
    &lt;pan-button&gt;Click Me&lt;/pan-button&gt;
  &lt;/pan-card&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>Serve the file with any HTTP server:</p>
<pre><code class="language-bash"># Python 3
$ python3 -m http.server 8000

# Python 2
$ python -m SimpleHTTPServer 8000

# PHP
$ php -S localhost:8000

# Node.js (if you have http-server installed)
$ npx http-server -p 8000</code></pre>
<p>Open <code>http://localhost:8000</code> in your browser. You should see a styled card with a button. The component loaded automatically—no imports, no registration, no configuration.</p>
<strong>What just happened?</strong>
<li>The <code>pan.mjs</code> script loaded and initialized the PAN autoloader</li>
<li>The autoloader scanned your page for custom elements (tags with hyphens)</li>
<li>It discovered <code><pan-card></code> and <code><pan-button></code></li>
<li>Using IntersectionObserver, it loaded these components as they entered the viewport</li>
<li>The components registered themselves and rendered their content</li>
<p>This is LARC's "convention over configuration" approach in action.</p>
<strong>When to use CDN:</strong>
<ul><li>Learning LARC</li>
<li>Quick experiments and prototypes</li>
<li>Simple single-page applications</li>
<li>Personal projects</li>
</ul>
<strong>When to avoid CDN:</strong>
<ul><li>Production applications requiring optimization</li>
<li>Offline-first applications</li>
<li>Projects with strict CSP policies</li>
<li>Applications needing specific version control</li>
</ul>
<h3>Option 2: NPM Installation</h3>
<p>For projects with existing Node.js tooling or teams familiar with npm, install LARC as a package:</p>
<pre><code class="language-bash">$ npm install @larcjs/core @larcjs/ui</code></pre>
<p>Then import in your JavaScript:</p>
<pre><code class="language-javascript">// main.js
import &#039;/node_modules/@larcjs/core/pan.mjs&#039;;

// Components auto-load from node_modules
// Configure the path resolver if needed</code></pre>
<p>Or use an import map in your HTML:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;script type=&quot;importmap&quot;&gt;
  {
    &quot;imports&quot;: {
      &quot;@larcjs/core/&quot;: &quot;./node_modules/@larcjs/core/&quot;,
      &quot;@larcjs/ui/&quot;: &quot;./node_modules/@larcjs/ui/&quot;
    }
  }
  &lt;/script&gt;
  &lt;script type=&quot;module&quot; src=&quot;./main.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;pan-card title=&quot;From NPM&quot;&gt;
    Components load from node_modules
  &lt;/pan-card&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<strong>When to use NPM:</strong>
<ul><li>Existing Node.js projects</li>
<li>Teams familiar with package.json workflows</li>
<li>Projects using bundlers (Vite, Webpack, Rollup)</li>
<li>TypeScript projects (add <code>@larcjs/core-types</code>)</li>
</ul>
<h3>Option 3: Git Clone (Full Repository)</h3>
<p>For working with examples, contributing to LARC, or learning from source code:</p>
<pre><code class="language-bash"># Clone with submodules
$ git clone --recurse-submodules https://github.com/larcjs/larc.git
$ cd larc

# Run setup script (handles submodule initialization)
$ ./setup.sh         # Mac/Linux
# or
$ setup.bat          # Windows

# Start a server
$ python3 -m http.server 8000

# Open http://localhost:8000/test-config.html</code></pre>
<p>This gives you:</p>
<ul><li>Complete source code</li>
<li>All examples</li>
<li>Playground for testing components</li>
<li>Documentation site</li>
<li>DevTools extension</li>
</ul>
<strong>When to use Git clone:</strong>
<ul><li>Learning from examples</li>
<li>Contributing to LARC</li>
<li>Exploring advanced features</li>
<li>Building custom components</li>
</ul>
<h3>Option 4: Create LARC App (Coming Soon)</h3>
<p>The LARC CLI provides scaffolding tools (currently in development):</p>
<pre><code class="language-bash"># Create a new project
$ npx create-larc-app my-app
$ cd my-app
$ npm run dev

# Add components from registry
$ larc add pan-data-table

# Generate custom components
$ larc generate component my-widget</code></pre>
<p>This creates a zero-config development environment with hot reload, component generation, and registry integration.</p>
<h2>Development Environment Setup</h2>
<p>Once you've chosen an installation method, set up your development environment for maximum productivity.</p>
<h3>Directory Structure</h3>
<p>LARC doesn't enforce a specific structure, but here's a recommended layout:</p>
<pre><code class="language-plaintext">my-larc-app/
|-- index.html              # Entry point
|-- larc-config.mjs         # Path configuration (optional)
|-- src/
|   |-- components/         # Your custom components
|   |   |-- task-list.mjs
|   |   |-- task-item.mjs
|   |   `-- task-form.mjs
|   |-- utils/              # Helper functions
|   |   |-- api.mjs
|   |   `-- storage.mjs
|   `-- styles/             # Global styles
|       `-- main.css
|-- core/                   # LARC core (if cloned)
|   `-- src/
|       `-- pan.mjs
`-- ui/                     # LARC components (if cloned)
    `-- src/
        `-- components/</code></pre>
<strong>Rationale:</strong>
<ul><li><code>src/components/</code> - Your application components live here</li>
<li><code>src/utils/</code> - Pure functions, API clients, shared logic</li>
<li><code>src/styles/</code> - Global CSS, CSS custom properties, themes</li>
<li><code>core/</code> and <code>ui/</code> - LARC source (only if using Git clone method)</li>
</ul>
This structure scales from small experiments to large applications while keeping concerns separated.
<h3>Editor Configuration</h3>
<p>#### VS Code (Recommended)</p>
<p>Install the LARC extension (when available) for:</p>
<ul><li>Component auto-completion</li>
<li>PAN topic IntelliSense</li>
<li>Snippet library</li>
<li>Integrated component browser</li>
</ul>
<strong>Manual setup without extension:</strong>
<p>Create <code>.vscode/settings.json</code>:</p>
<pre><code class="language-json">{
  &quot;files.associations&quot;: {
    &quot;*.mjs&quot;: &quot;javascript&quot;
  },
  &quot;emmet.includeLanguages&quot;: {
    &quot;javascript&quot;: &quot;html&quot;
  },
  &quot;emmet.triggerExpansionOnTab&quot;: true
}</code></pre>
<p>This enables Emmet HTML completion inside JavaScript template literals.</p>
<strong>Recommended extensions:</strong>
<ul><li><strong>Live Server</strong> - Auto-reload on file changes</li>
<li><strong>ES6 String HTML</strong> - Syntax highlighting in template literals</li>
<li><strong>ESLint</strong> - JavaScript linting (configure for ES modules)</li>
<li><strong>Path Intellisense</strong> - Autocomplete for imports</li>
</ul>
#### Other Editors
<strong>Sublime Text:</strong>
<ul><li>Install "HTML-CSS-JS Prettify"</li>
<li>Use "JavaScript Next" syntax highlighting</li>
</ul>
<strong>Vim:</strong>
<pre><code class="language-vim">&quot; In .vimrc
autocmd BufNewFile,BufRead *.mjs set filetype=javascript</code></pre>
<strong>WebStorm/IntelliJ:</strong>
<ul><li>Built-in support for ES modules</li>
<li>Configure web server for localhost testing</li>
</ul>
<h3>Local Development Server</h3>
<p>LARC requires a local server (file:// URLs don't work due to CORS and ES module restrictions). Choose any option:</p>
<p>#### Python (Built-in)</p>
<pre><code class="language-bash"># Python 3 (most common)
$ python3 -m http.server 8000
# Serving HTTP on :: port 8000 (http://[::]:8000/) ...

# Python 2 (if needed)
$ python -m SimpleHTTPServer 8000</code></pre>
<strong>Pros:</strong> No installation, universally available, simple
<strong>Cons:</strong> No hot reload, basic features
<p>#### Node.js Options</p>
<strong>http-server (simple):</strong>
<pre><code class="language-bash">$ npx http-server -p 8000 -c-1
# -c-1 disables caching (important during development)</code></pre>
<strong>live-server (with auto-reload):</strong>
<pre><code class="language-bash">$ npx live-server --port=8000 --no-browser</code></pre>
<strong>Vite (full-featured):</strong>
<pre><code class="language-bash">$ npx vite --port 8000</code></pre>
<p>Vite provides:</p>
<ul><li>Instant hot module replacement</li>
<li>Built-in TypeScript support</li>
<li>Optimized production builds</li>
<li>Plugin ecosystem</li>
</ul>
#### PHP (Built-in)
<pre><code class="language-bash">$ php -S localhost:8000</code></pre>
<p>#### VS Code Extension</p>
<p>Install "Live Server" extension, then right-click <code>index.html</code> -> "Open with Live Server". Changes reload automatically.</p>
<strong>Recommended for beginners:</strong> Python (simplest) or Live Server extension (best DX)
<strong>Recommended for teams:</strong> Vite (most features, best performance)
<h2>Browser DevTools Setup</h2>
<p>LARC applications are debuggable with standard browser DevTools. Here's how to configure them effectively.</p>
<h3>Chrome DevTools</h3>
<strong>Essential Panels:</strong>
<li><strong>Console</strong> - View PAN messages, errors, and logs</li>
<li><strong>Network</strong> - Monitor component loading</li>
<li><strong>Elements</strong> - Inspect Shadow DOM and component attributes</li>
<li><strong>Application</strong> - Check localStorage, IndexedDB, and OPFS</li>
<strong>Enable useful settings:</strong>
<li>Open DevTools (F12 / Cmd+Option+I)</li>
<li>Settings (F1 / [gear] icon) -> Experiments</li>
<li>Enable:</li>
<p>- "Show user agent shadow DOM" (to inspect component internals)
   - "CSS Authoring" (for live CSS editing)</p>
<strong>Debugging PAN messages:</strong>
<pre><code class="language-javascript">// Add to index.html during development
if (window.location.hostname === &#039;localhost&#039;) {
  // Subscribe to all messages
  window.addEventListener(&#039;pan-ready&#039;, () =&gt; {
    window.panClient.subscribe(&#039;*&#039;, ({ topic, data, meta }) =&gt; {
      console.log(`[PAN] ${topic}`, data, meta);
    });
  });
}</code></pre>
<p>This logs every message flowing through the PAN bus.</p>
<h3>Firefox Developer Tools</h3>
<p>Firefox has excellent Web Components support:</p>
<li>Open DevTools (F12 / Cmd+Option+I)</li>
<li>Enable "Show Browser Styles" in Inspector settings</li>
<li>Use Console to inspect components:</li>
<pre><code class="language-javascript">// Get component instance
const card = document.querySelector(&#039;pan-card&#039;);
console.log(card);

// Inspect Shadow DOM
console.log(card.shadowRoot);

// Trigger methods
card.setAttribute(&#039;theme&#039;, &#039;dark&#039;);</code></pre>
<h3>Safari Web Inspector</h3>
<p>Safari's Web Inspector works well for debugging:</p>
<li>Enable Develop menu: Preferences -> Advanced -> Show Develop Menu</li>
<li>Develop -> Show Web Inspector (Cmd+Option+I)</li>
<li>Elements tab shows Shadow DOM boundaries clearly</li>
<strong>Safari-specific considerations:</strong>
<ul><li>OPFS not available (use IndexedDB fallback)</li>
<li>BroadcastChannel available in Safari 15.4+</li>
<li>Test iOS Safari separately (different engine version)</li>
</ul>
<h3>LARC DevTools Extension (Optional)</h3>
<p>The LARC DevTools extension (in development) provides:</p>
<ul><li>Visual PAN message inspector</li>
<li>Component tree visualization</li>
<li>Performance profiling</li>
<li>State inspection</li>
</ul>
Install from Chrome Web Store or Firefox Add-ons when available.
<h2>Your First LARC Application</h2>
<p>Let's build a complete task manager to demonstrate LARC's development workflow. This isn't a trivial example—it includes multiple components, state management, persistence, and error handling.</p>
<h3>Step 1: Project Setup</h3>
<p>Create a new directory and add <code>index.html</code>:</p>
<pre><code class="language-bash">$ mkdir task-manager
$ cd task-manager</code></pre>
<strong>index.html:</strong>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Task Manager - LARC Example&lt;/title&gt;
  &lt;style&gt;
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, sans-serif;
      background: #f5f5f5;
      padding: 2rem;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    h1 {
      margin-bottom: 2rem;
      color: #333;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;h1&gt;Task Manager&lt;/h1&gt;

    &lt;!-- Load LARC from CDN --&gt;
    &lt;script type=&quot;module&quot; src=&quot;https://unpkg.com/@larcjs/core@2.0.0/src/pan.mjs&quot;&gt;&lt;/script&gt;

    &lt;!-- Load our custom components --&gt;
    &lt;script type=&quot;module&quot; src=&quot;./task-form.mjs&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;module&quot; src=&quot;./task-list.mjs&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;module&quot; src=&quot;./task-item.mjs&quot;&gt;&lt;/script&gt;

    &lt;!-- Use components --&gt;
    &lt;task-form&gt;&lt;/task-form&gt;
    &lt;task-list&gt;&lt;/task-list&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3>Step 2: Create Directory Structure</h3>
<pre><code class="language-bash">$ mkdir -p src/components src/utils</code></pre>
<h3>Step 3: Build the Task Form Component</h3>
<p>Create <code>src/components/task-form.mjs</code>:</p>
<pre><code class="language-javascript">class TaskForm extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: &#039;open&#039; });
  }

  connectedCallback() {
    this.render();
    this.setupEventListeners();
  }

  render() {
    this.shadowRoot.innerHTML = `
      &lt;style&gt;
        :host {
          display: block;
          margin-bottom: 2rem;
        }

        form {
          display: flex;
          gap: 0.5rem;
          background: white;
          padding: 1.5rem;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        input {
          flex: 1;
          padding: 0.75rem;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 1rem;
        }

        input:focus {
          outline: none;
          border-color: #4CAF50;
        }

        button {
          padding: 0.75rem 1.5rem;
          background: #4CAF50;
          color: white;
          border: none;
          border-radius: 4px;
          font-size: 1rem;
          cursor: pointer;
          transition: background 0.2s;
        }

        button:hover {
          background: #45a049;
        }

        button:disabled {
          background: #ccc;
          cursor: not-allowed;
        }
      &lt;/style&gt;

      &lt;form&gt;
        &lt;input
          type=&quot;text&quot;
          placeholder=&quot;What needs to be done?&quot;
          required
          autocomplete=&quot;off&quot;
        /&gt;
        &lt;button type=&quot;submit&quot;&gt;Add Task&lt;/button&gt;
      &lt;/form&gt;
    `;
  }

  setupEventListeners() {
    const form = this.shadowRoot.querySelector(&#039;form&#039;);
    const input = this.shadowRoot.querySelector(&#039;input&#039;);

    form.addEventListener(&#039;submit&#039;, (e) =&gt; {
      e.preventDefault();

      const text = input.value.trim();
      if (!text) return;

      // Publish task creation via PAN bus
      window.panClient.publish(&#039;tasks.add&#039;, {
        id: Date.now(),
        text,
        completed: false,
        createdAt: new Date().toISOString()
      });

      // Clear input
      input.value = &#039;&#039;;
      input.focus();
    });
  }
}

customElements.define(&#039;task-form&#039;, TaskForm);</code></pre>
<h3>Step 4: Build the Task List Component</h3>
<p>Create <code>src/components/task-list.mjs</code>:</p>
<pre><code class="language-javascript">class TaskList extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: &#039;open&#039; });
    this.tasks = [];
  }

  connectedCallback() {
    this.render();
    this.subscribeToMessages();
    this.loadTasks();
  }

  disconnectedCallback() {
    // Clean up subscriptions
    if (this.subscriptions) {
      this.subscriptions.forEach(sub =&gt; sub.unsubscribe());
    }
  }

  subscribeToMessages() {
    this.subscriptions = [
      // Listen for new tasks
      window.panClient.subscribe(&#039;tasks.add&#039;, ({ data }) =&gt; {
        this.tasks.push(data);
        this.saveTasks();
        this.render();
      }),

      // Listen for task toggles
      window.panClient.subscribe(&#039;tasks.toggle&#039;, ({ data }) =&gt; {
        const task = this.tasks.find(t =&gt; t.id === data.id);
        if (task) {
          task.completed = !task.completed;
          this.saveTasks();
          this.render();
        }
      }),

      // Listen for task deletions
      window.panClient.subscribe(&#039;tasks.delete&#039;, ({ data }) =&gt; {
        this.tasks = this.tasks.filter(t =&gt; t.id !== data.id);
        this.saveTasks();
        this.render();
      })
    ];
  }

  loadTasks() {
    try {
      const stored = localStorage.getItem(&#039;larc-tasks&#039;);
      if (stored) {
        this.tasks = JSON.parse(stored);
        this.render();
      }
    } catch (error) {
      console.error(&#039;Failed to load tasks:&#039;, error);
    }
  }

  saveTasks() {
    try {
      localStorage.setItem(&#039;larc-tasks&#039;, JSON.stringify(this.tasks));
    } catch (error) {
      console.error(&#039;Failed to save tasks:&#039;, error);
    }
  }

  render() {
    const total = this.tasks.length;
    const completed = this.tasks.filter(t =&gt; t.completed).length;

    this.shadowRoot.innerHTML = `
      &lt;style&gt;
        :host {
          display: block;
        }

        .summary {
          background: white;
          padding: 1rem 1.5rem;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          margin-bottom: 1rem;
          color: #666;
          font-size: 0.9rem;
        }

        .list {
          background: white;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          overflow: hidden;
        }

        .empty {
          padding: 3rem;
          text-align: center;
          color: #999;
        }
      &lt;/style&gt;

      ${total &gt; 0 ? `
        &lt;div class=&quot;summary&quot;&gt;
          ${completed} of ${total} tasks completed
        &lt;/div&gt;
      ` : &#039;&#039;}

      &lt;div class=&quot;list&quot;&gt;
        ${total === 0 ? `
          &lt;div class=&quot;empty&quot;&gt;No tasks yet. Add one above!&lt;/div&gt;
        ` : &#039;&#039;}
      &lt;/div&gt;
    `;

    // Render task items
    const list = this.shadowRoot.querySelector(&#039;.list&#039;);
    this.tasks.forEach(task =&gt; {
      const item = document.createElement(&#039;task-item&#039;);
      item.setAttribute(&#039;task-id&#039;, task.id);
      item.setAttribute(&#039;text&#039;, task.text);
      if (task.completed) {
        item.setAttribute(&#039;completed&#039;, &#039;&#039;);
      }
      list.appendChild(item);
    });
  }
}

customElements.define(&#039;task-list&#039;, TaskList);</code></pre>
<h3>Step 5: Build the Task Item Component</h3>
<p>Create <code>src/components/task-item.mjs</code>:</p>
<pre><code class="language-javascript">class TaskItem extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: &#039;open&#039; });
  }

  static get observedAttributes() {
    return [&#039;completed&#039;, &#039;text&#039;];
  }

  connectedCallback() {
    this.render();
    this.setupEventListeners();
  }

  attributeChangedCallback() {
    if (this.shadowRoot) {
      this.render();
    }
  }

  get taskId() {
    return parseInt(this.getAttribute(&#039;task-id&#039;));
  }

  get text() {
    return this.getAttribute(&#039;text&#039;) || &#039;&#039;;
  }

  get completed() {
    return this.hasAttribute(&#039;completed&#039;);
  }

  render() {
    this.shadowRoot.innerHTML = `
      &lt;style&gt;
        :host {
          display: block;
          border-bottom: 1px solid #eee;
        }

        :host(:last-child) {
          border-bottom: none;
        }

        .task {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1rem 1.5rem;
          transition: background 0.2s;
        }

        .task:hover {
          background: #f9f9f9;
        }

        input[type=&quot;checkbox&quot;] {
          width: 20px;
          height: 20px;
          cursor: pointer;
        }

        .text {
          flex: 1;
          font-size: 1rem;
          transition: color 0.2s, text-decoration 0.2s;
        }

        .text.completed {
          color: #999;
          text-decoration: line-through;
        }

        .delete {
          padding: 0.5rem 1rem;
          background: #f44336;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 0.9rem;
          opacity: 0.7;
          transition: opacity 0.2s;
        }

        .delete:hover {
          opacity: 1;
        }
      &lt;/style&gt;

      &lt;div class=&quot;task&quot;&gt;
        &lt;input type=&quot;checkbox&quot; ${this.completed ? &#039;checked&#039; : &#039;&#039;} /&gt;
        &lt;span class=&quot;text ${this.completed ? &#039;completed&#039; : &#039;&#039;}&quot;&gt;${this.text}&lt;/span&gt;
        &lt;button class=&quot;delete&quot;&gt;Delete&lt;/button&gt;
      &lt;/div&gt;
    `;
  }

  setupEventListeners() {
    const checkbox = this.shadowRoot.querySelector(&#039;input[type=&quot;checkbox&quot;]&#039;);
    const deleteBtn = this.shadowRoot.querySelector(&#039;.delete&#039;);

    checkbox.addEventListener(&#039;change&#039;, () =&gt; {
      window.panClient.publish(&#039;tasks.toggle&#039;, {
        id: this.taskId
      });
    });

    deleteBtn.addEventListener(&#039;click&#039;, () =&gt; {
      window.panClient.publish(&#039;tasks.delete&#039;, {
        id: this.taskId
      });
    });
  }
}

customElements.define(&#039;task-item&#039;, TaskItem);</code></pre>
<h3>Step 6: Run the Application</h3>
<p>Start your development server:</p>
<pre><code class="language-bash">$ python3 -m http.server 8000</code></pre>
<p>Open <code>http://localhost:8000</code> in your browser. You should see:</p>
<ul><li>A form to add tasks</li>
<li>An empty state message</li>
<li>Tasks appear when you add them</li>
<li>Checkbox to toggle completion</li>
<li>Delete button to remove tasks</li>
<li>Task counter showing progress</li>
<li>Persistence (refresh the page—tasks remain)</li>
</ul>
<h3>What You Just Built</h3>
<p>This application demonstrates core LARC concepts:</p>
<li><strong>Component Composition</strong> - Three components work together without direct coupling</li>
<li><strong>PAN Bus Messaging</strong> - Components communicate through published messages</li>
<li><strong>Shadow DOM</strong> - Each component has encapsulated styles</li>
<li><strong>Lifecycle Management</strong> - Components clean up subscriptions properly</li>
<li><strong>State Persistence</strong> - Data saved to localStorage automatically</li>
<li><strong>Progressive Enhancement</strong> - Works without JavaScript for basic HTML</li>
<strong>Try these experiments:</strong>
<li>Open the Console and log all PAN messages:</li>
<pre><code class="language-javascript">panClient.subscribe(&#039;*&#039;, ({ topic, data }) =&gt; {
  console.log(&#039;[PAN]&#039;, topic, data);
});</code></pre>
<li>Add a task and watch messages flow: <code>tasks.add</code>, updates trigger re-renders</li>
<li>Inspect Shadow DOM in Elements panel—each component's styles are isolated</li>
<li>Refresh the page—tasks persist via localStorage</li>
<h2>Serving Static Files</h2>
<p>LARC applications are just HTML, CSS, and JavaScript files. Any HTTP server works, but different servers offer different features.</p>
<h3>Development Servers (Local)</h3>
<strong>Quick comparison:</strong>
<p>| Server | Setup | Hot Reload | HTTPS | Speed | Best For |
|--------|-------|------------|-------|-------|----------|
| Python | Built-in | No | No | Fast | Quick testing |
| Live Server | VS Code ext | Yes | Optional | Fast | Active development |
| http-server | npm | No | Optional | Fast | Node users |
| Vite | npm | Yes | Yes | Fastest | Full projects |
| PHP | Built-in | No | No | Fast | PHP developers |</p>
<strong>Recommended workflow:</strong>
<li><strong>Learning/Experimenting:</strong> Python (<code>python3 -m http.server</code>)</li>
<li><strong>Active Development:</strong> Live Server extension or Vite</li>
<li><strong>Team Projects:</strong> Vite or similar with shared config</li>
<h3>Production Servers</h3>
<strong>Static hosting options:</strong>
<li><strong>CDN-based:</strong></li>
   - Netlify (drag-and-drop deployment)
   - Vercel (Git integration)
   - Cloudflare Pages (global edge network)
   - GitHub Pages (free for public repos)
<li><strong>Traditional hosting:</strong></li>
   - Nginx (most common)
   - Apache (with mod_rewrite)
   - Caddy (automatic HTTPS)
<li><strong>Cloud platforms:</strong></li>
   - AWS S3 + CloudFront
   - Google Cloud Storage + CDN
   - Azure Static Web Apps
<strong>Deployment is simple:</strong>
<pre><code class="language-bash"># Example: Netlify CLI
$ npm install -g netlify-cli
$ netlify deploy --dir=. --prod</code></pre>
<p>Your LARC app deploys like any static site—just upload files. No build step required (though you can add optimization).</p>
<h3>CORS and Module Loading</h3>
<p>ES modules require proper MIME types. Most servers handle this automatically, but verify:</p>
<strong>Nginx:</strong>
<pre><code class="language-nginx">types {
    application/javascript mjs js;
}</code></pre>
<strong>Apache (.htaccess):</strong>
<pre><code class="language-apache">AddType application/javascript .mjs</code></pre>
<strong>Python:</strong> Works by default
<p>If modules fail to load, check:</p>
<li>Console for CORS errors</li>
<li>Network tab for MIME type (<code>application/javascript</code>)</li>
<li>Server is running (file:// URLs don't work)</li>
<h2>Browser Requirements and Compatibility</h2>
<p>LARC targets modern browsers with native Web Components support. Here's what you need to know.</p>
<h3>Supported Browsers</h3>
<strong>Minimum versions (full support, no polyfills):</strong>
<p>| Browser | Version | Released | Market Share |
|---------|---------|----------|--------------|
| Chrome | 90+ | April 2021 | ~65% |
| Edge | 90+ | April 2021 | ~5% |
| Firefox | 88+ | April 2021 | ~3% |
| Safari | 14+ | Sept 2020 | ~20% |
| Opera | 76+ | April 2021 | ~2% |
| Samsung | 15+ | April 2021 | ~3% |</p>
<strong>Total coverage:</strong> ~98% of global users (2025 data)
<p>These versions support:</p>
<ul><li>Custom Elements v1</li>
<li>Shadow DOM v1</li>
<li>ES Modules</li>
<li>IntersectionObserver</li>
<li>MutationObserver</li>
<li>Async/await</li>
</ul>
<h3>Feature Detection</h3>
<p>Not all browsers support every optional feature. Use feature detection:</p>
<pre><code class="language-javascript">// Check for optional features
const features = {
  opfs: &#039;storage&#039; in navigator &amp;&amp; &#039;getDirectory&#039; in navigator.storage,
  broadcastChannel: typeof BroadcastChannel !== &#039;undefined&#039;,
  resizeObserver: typeof ResizeObserver !== &#039;undefined&#039;,
  constructableStylesheets: &#039;adoptedStyleSheets&#039; in Document.prototype
};

console.log(&#039;Available features:&#039;, features);

// Use features conditionally
if (features.opfs) {
  // Use Origin Private File System
} else {
  // Fall back to IndexedDB
}</code></pre>
<h3>Polyfills for Older Browsers</h3>
<p>If you must support older browsers, add polyfills selectively:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;LARC with Polyfills&lt;/title&gt;

  &lt;!-- Feature detection --&gt;
  &lt;script&gt;
    // Only load polyfills if needed
    if (!(&#039;customElements&#039; in window)) {
      document.write(&#039;&lt;script src=&quot;https://unpkg.com/@webcomponents/webcomponentsjs@2/webcomponents-loader.js&quot;&gt;&lt;\/script&gt;&#039;);
    }

    if (typeof BroadcastChannel === &#039;undefined&#039;) {
      document.write(&#039;&lt;script src=&quot;https://unpkg.com/broadcast-channel@4/dist/bundle.js&quot;&gt;&lt;\/script&gt;&#039;);
    }
  &lt;/script&gt;

  &lt;!-- Load LARC after polyfills --&gt;
  &lt;script type=&quot;module&quot; src=&quot;https://unpkg.com/@larcjs/core@2.0.0/src/pan.mjs&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- Your app --&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<strong>Polyfill size impact:</strong>
<ul><li>Web Components: ~30 KB gzipped</li>
<li>BroadcastChannel: ~5 KB gzipped</li>
<li>Total: ~35 KB for full compatibility</li>
</ul>
<strong>Recommendation:</strong> Target modern browsers only. Display upgrade message for IE11 and older browsers:
<pre><code class="language-html">&lt;!--[if IE]&gt;
&lt;div style=&quot;padding: 2rem; background: #fff3cd; border: 2px solid #ffc107;&quot;&gt;
  &lt;h2&gt;Browser Update Required&lt;/h2&gt;
  &lt;p&gt;This application requires a modern browser. Please upgrade to Chrome 90+, Firefox 88+, Safari 14+, or Edge 90+.&lt;/p&gt;
&lt;/div&gt;
&lt;![endif]--&gt;</code></pre>
<h3>Mobile Browser Support</h3>
<p>LARC works on mobile browsers with the same requirements:</p>
<strong>iOS:</strong>
<ul><li>Safari 14+ (iOS 14+)</li>
<li>Chrome 90+ (iOS)</li>
<li>Full support except OPFS (use IndexedDB fallback)</li>
</ul>
<strong>Android:</strong>
<ul><li>Chrome 90+ (Android 7+)</li>
<li>Samsung Internet 15+</li>
<li>Full support including OPFS</li>
</ul>
<strong>Test on real devices:</strong>
<pre><code class="language-bash"># Start server accessible on network
$ python3 -m http.server 8000

# Find your local IP
$ ifconfig | grep &quot;inet &quot;  # Mac/Linux
$ ipconfig                  # Windows

# Access from mobile browser
# http://192.168.1.100:8000</code></pre>
<h2>Common Troubleshooting</h2>
<h3>Problem: Components Don't Load</h3>
<strong>Symptoms:</strong> Page blank, no errors, or "Failed to fetch" in Console
<strong>Solutions:</strong>
<li><strong>Check server is running:</strong></li>
<pre><code class="language-bash">$ python3 -m http.server 8000
# Should show &quot;Serving HTTP on...&quot;</code></pre>
<li><strong>Verify file paths:</strong></li>
<pre><code class="language-javascript">// Check Network tab in DevTools
// Look for 404 errors</code></pre>
<li><strong>Check MIME types:</strong></li>
<pre><code class="language-bash"># Should be application/javascript
$ curl -I http://localhost:8000/task-form.mjs</code></pre>
<li><strong>Verify module syntax:</strong></li>
<pre><code class="language-javascript">// Must use .mjs extension or type=&quot;module&quot;
&lt;script type=&quot;module&quot; src=&quot;./app.js&quot;&gt;&lt;/script&gt;</code></pre>
<h3>Problem: PAN Bus Messages Not Received</h3>
<strong>Symptoms:</strong> Components don't update when publishing messages
<strong>Solutions:</strong>
<li><strong>Wait for PAN bus initialization:</strong></li>
<pre><code class="language-javascript">// Wrong - panClient may not exist yet
window.panClient.publish(&#039;test&#039;, {});

// Right - wait for pan-ready event
window.addEventListener(&#039;pan-ready&#039;, () =&gt; {
  window.panClient.publish(&#039;test&#039;, {});
});</code></pre>
<li><strong>Check subscriptions:</strong></li>
<pre><code class="language-javascript">// Debug: Log all messages
panClient.subscribe(&#039;*&#039;, ({ topic, data }) =&gt; {
  console.log(&#039;[PAN]&#039;, topic, data);
});</code></pre>
<li><strong>Verify topic patterns:</strong></li>
<pre><code class="language-javascript">// Specific
panClient.subscribe(&#039;tasks.add&#039;, handler);  // Only tasks.add

// Wildcard
panClient.subscribe(&#039;tasks.*&#039;, handler);    // All tasks.* topics

// All
panClient.subscribe(&#039;*&#039;, handler);          // Everything</code></pre>
<h3>Problem: Styles Not Applying</h3>
<strong>Symptoms:</strong> Components render but look unstyled
<strong>Solutions:</strong>
<li><strong>Check Shadow DOM encapsulation:</strong></li>
<pre><code class="language-javascript">// Global styles don&#039;t penetrate Shadow DOM
// Use :host selector
this.shadowRoot.innerHTML = `
  &lt;style&gt;
    :host {
      display: block;  /* Applied to component itself */
    }
    .inner {
      color: blue;     /* Applied to internal elements */
    }
  &lt;/style&gt;
`;</code></pre>
<li><strong>Use CSS Custom Properties for theming:</strong></li>
<pre><code class="language-css">/* Global (outside Shadow DOM) */
:root {
  --primary-color: #4CAF50;
}

/* Component (inside Shadow DOM) */
button {
  background: var(--primary-color);
}</code></pre>
<h3>Problem: localStorage Quota Exceeded</h3>
<strong>Symptoms:</strong> "QuotaExceededError" in Console
<strong>Solutions:</strong>
<li><strong>Check storage usage:</strong></li>
<pre><code class="language-javascript">if (&#039;storage&#039; in navigator &amp;&amp; &#039;estimate&#039; in navigator.storage) {
  navigator.storage.estimate().then(({ usage, quota }) =&gt; {
    console.log(`Using ${usage} of ${quota} bytes`);
  });
}</code></pre>
<li><strong>Implement data cleanup:</strong></li>
<pre><code class="language-javascript">try {
  localStorage.setItem(&#039;data&#039;, JSON.stringify(data));
} catch (error) {
  if (error.name === &#039;QuotaExceededError&#039;) {
    // Clear old data
    localStorage.clear();
    // Try again
    localStorage.setItem(&#039;data&#039;, JSON.stringify(data));
  }
}</code></pre>
<li><strong>Use IndexedDB for large datasets:</strong></li>
<pre><code class="language-javascript">// IndexedDB has much higher quota (typically 50%+ of disk space)</code></pre>
<h3>Problem: CORS Errors</h3>
<strong>Symptoms:</strong> "CORS policy" errors when loading components
<strong>Solutions:</strong>
<li><strong>Use proper server (not file://):</strong></li>
<pre><code class="language-bash"># Don&#039;t open index.html directly in browser
# Always use HTTP server
$ python3 -m http.server 8000</code></pre>
<li><strong>Check CDN CORS headers (usually automatic)</strong></li>
<li><strong>For API calls, configure server CORS:</strong></li>
<pre><code class="language-javascript">// Server must send appropriate headers
Access-Control-Allow-Origin: *</code></pre>
<h2>Next Steps</h2>
<p>You now have a working LARC development environment and understand the basic workflow:</p>
<li>Create HTML file with component tags</li>
<li>Load LARC autoloader</li>
<li>Write components as Custom Elements</li>
<li>Communicate through PAN bus</li>
<li>Test in browser with DevTools</li>
<li>Deploy as static files</li>
<p>In Chapter 6, we'll explore state management in depth—how to handle complex application state, implement undo/redo, synchronize across tabs, and persist data reliably. The task manager you built is a foundation; next, we'll scale it up.</p>
<p>Before moving on, experiment with your task manager:</p>
<ul><li>Add filtering (all/active/completed)</li>
<li>Implement task editing</li>
<li>Add due dates</li>
<li>Create categories</li>
<li>Export/import tasks</li>
</ul>
Each feature is an opportunity to practice PAN messaging and component composition. The patterns you learn here apply to any LARC application.
<p>Welcome to zero-build development. The browser is your development environment now.</p>
      </article>
      <footer class="docs-footer">
        <a href="https://github.com/chrisrobison/pan/edit/main/books/building-with-larc/chapter-05-getting-started.md" target="_blank">
          Edit this page on GitHub
        </a>
      </footer>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha384-F/bZzf7p3Joyp5psL90p/p89AZJsndkSoGwRpXcZhleCWhd8SnRuoYo4d0yirjJp" crossorigin="anonymous"></script>
  <script src="../assets/docs.js"></script>
</body>
</html>