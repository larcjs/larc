<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PAN Bus Communication Patterns Â· PAN Documentation</title>
  <meta name="description" content="PAN (Page Area Network) Documentation - PAN Bus Communication Patterns">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/theme.css">
  <link rel="stylesheet" href="../assets/docs.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" integrity="sha384-wH75j6z1lH97ZOpMOInqhgKzFkAInZPPSPlZpYKYTOqsaizPvhQZmAtLcPKXpLyH" crossorigin="anonymous">
</head>
<body>
  <header class="docs-header">
    <div class="docs-header-content">
      <a href="../index.html" class="logo">
        <span>PAN</span>
      </a>
      <nav class="docs-nav">
        <a href="../index.html">Home</a>
        <a href="index.html" class="active">Docs</a>
        <a href="../examples.html">Examples</a>
        <a href="../apps.html">Apps</a>
        <a href="https://github.com/chrisrobison/pan" target="_blank">GitHub</a>
      </nav>
    </div>
  </header>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <div class="docs-sidebar-content">
        <h3>Documentation</h3>
        <nav class="docs-menu" id="docs-menu">
          <!-- Will be populated by JavaScript -->
        </nav>
      </div>
    </aside>

    <main class="docs-main">
      <div class="docs-breadcrumb">
        <a href="../index.html">Home</a> / <a href="#">books</a> / <a href="#">learning-larc</a> / <a href="#">diagrams</a> / <span>05-pan-bus</span>
      </div>
      <article class="docs-content">
        <h1>PAN Bus Communication Patterns</h1>
<h2>Pub/Sub Architecture</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;secondaryColor&#039;:&#039;#764ba2&#039;,&#039;tertiaryColor&#039;:&#039;#48bb78&#039;}}}%%
graph TB
    subgraph Publishers[&quot;ğŸ“¤ Publishers&quot;]
        P1[&quot;ğŸ”˜ Login Button&lt;br/&gt;fa:fa-sign-in-alt&quot;]
        P2[&quot;ğŸ›’ Cart Component&lt;br/&gt;fa:fa-shopping-cart&quot;]
        P3[&quot;ğŸ”Œ API Service&lt;br/&gt;fa:fa-server&quot;]
    end

    subgraph PAN[&quot;ğŸšŒ PAN Bus&quot;]
        Router[&quot;ğŸ“¡ Topic Router&lt;br/&gt;fa:fa-broadcast-tower&quot;]

        subgraph Topics[&quot;ğŸ“‹ Topics&quot;]
            T1[&quot;ğŸ”‘ user.login&lt;br/&gt;fa:fa-key&quot;]
            T2[&quot;â• cart.item.added&lt;br/&gt;fa:fa-plus&quot;]
            T3[&quot;ğŸ“¦ data.loaded&lt;br/&gt;fa:fa-box&quot;]
        end
    end

    subgraph Subscribers[&quot;ğŸ“¥ Subscribers&quot;]
        S1[&quot;ğŸ‘¤ User Menu&lt;br/&gt;fa:fa-user-circle&quot;]
        S2[&quot;ğŸ“ Sidebar&lt;br/&gt;fa:fa-bars&quot;]
        S3[&quot;ğŸ”” Notification&lt;br/&gt;fa:fa-bell&quot;]
        S4[&quot;ğŸ“Š Analytics&lt;br/&gt;fa:fa-chart-line&quot;]
    end

    P1 --&gt;|ğŸ“¢ publish| T1
    P2 --&gt;|ğŸ“¢ publish| T2
    P3 --&gt;|ğŸ“¢ publish| T3

    T1 --&gt; Router
    T2 --&gt; Router
    T3 --&gt; Router

    Router --&gt;|ğŸ“¬ notify| S1
    Router --&gt;|ğŸ“¬ notify| S2
    Router --&gt;|ğŸ“¬ notify| S3
    Router --&gt;|ğŸ“¬ notify| S4

    classDef publisher fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef pan fill:#764ba2,stroke:#6a3f99,stroke-width:3px,color:#fff,font-weight:bold
    classDef subscriber fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold
    classDef topic fill:#4299e1,stroke:#3182ce,stroke-width:2px,color:#fff

    class P1,P2,P3 publisher
    class Router pan
    class S1,S2,S3,S4 subscriber
    class T1,T2,T3 topic</code></pre>
<h2>Message Flow Sequence</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;actorBkg&#039;:&#039;#667eea&#039;,&#039;actorBorder&#039;:&#039;#5568d3&#039;,&#039;actorTextColor&#039;:&#039;#fff&#039;,&#039;signalColor&#039;:&#039;#764ba2&#039;,&#039;signalTextColor&#039;:&#039;#2d3748&#039;}}}%%
sequenceDiagram
    participant LoginBtn as ğŸ”˜ Login Button&lt;br/&gt;fa:fa-sign-in-alt
    participant PAN as ğŸšŒ PAN Bus&lt;br/&gt;fa:fa-broadcast-tower
    participant UserMenu as ğŸ‘¤ User Menu&lt;br/&gt;fa:fa-user-circle
    participant Sidebar as ğŸ“ Sidebar&lt;br/&gt;fa:fa-bars
    participant Analytics as ğŸ“Š Analytics&lt;br/&gt;fa:fa-chart-line
    participant API as ğŸ”Œ Backend&lt;br/&gt;fa:fa-server

    Note over LoginBtn,Analytics: ğŸ–±ï¸ User clicks login button

    LoginBtn-&gt;&gt;+PAN: ğŸ“¢ publish(&#039;user.login.started&#039;)
    PAN--&gt;&gt;UserMenu: ğŸ“¬ notify
    PAN--&gt;&gt;Sidebar: ğŸ“¬ notify
    Note over UserMenu: â³ Show loading state
    UserMenu-&gt;&gt;UserMenu: ğŸ¨ Update UI

    LoginBtn-&gt;&gt;+API: ğŸŒ POST /api/login
    API--&gt;&gt;-LoginBtn: âœ… {token, user}

    LoginBtn-&gt;&gt;PAN: ğŸ“¢ publish(&#039;user.login.success&#039;, {user})

    PAN--&gt;&gt;UserMenu: ğŸ“¬ notify
    PAN--&gt;&gt;Sidebar: ğŸ“¬ notify
    PAN--&gt;&gt;-Analytics: ğŸ“¬ notify

    Note over UserMenu,Sidebar: ğŸ¨ Update with user data
    UserMenu-&gt;&gt;UserMenu: ğŸ‘¤ Update with user data
    Sidebar-&gt;&gt;Sidebar: ğŸ“± Show user panel
    Analytics-&gt;&gt;API: ğŸ“Š Track event</code></pre>
<h2>Topic Namespace Structure</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;secondaryColor&#039;:&#039;#48bb78&#039;,&#039;tertiaryColor&#039;:&#039;#4299e1&#039;}}}%%
graph TB
    Root[&quot;ğŸŒŸ *&lt;br/&gt;fa:fa-star&lt;br/&gt;All Events&quot;]

    Root --&gt; User[&quot;ğŸ‘¤ user.*&lt;br/&gt;fa:fa-user&quot;]
    Root --&gt; Cart[&quot;ğŸ›’ cart.*&lt;br/&gt;fa:fa-shopping-cart&quot;]
    Root --&gt; App[&quot;ğŸ“± app.*&lt;br/&gt;fa:fa-mobile-alt&quot;]

    User --&gt; UserAuth[&quot;ğŸ” user.auth.*&lt;br/&gt;fa:fa-lock&quot;]
    User --&gt; UserProfile[&quot;ğŸ“‹ user.profile.*&lt;br/&gt;fa:fa-id-card&quot;]

    UserAuth --&gt; Login[&quot;ğŸ”‘ user.auth.login&lt;br/&gt;fa:fa-sign-in-alt&quot;]
    UserAuth --&gt; Logout[&quot;ğŸšª user.auth.logout&lt;br/&gt;fa:fa-sign-out-alt&quot;]
    UserAuth --&gt; Refresh[&quot;ğŸ”„ user.auth.refresh&lt;br/&gt;fa:fa-sync&quot;]

    UserProfile --&gt; ProfileUpdate[&quot;âœï¸ user.profile.update&lt;br/&gt;fa:fa-edit&quot;]
    UserProfile --&gt; ProfileFetch[&quot;ğŸ“¥ user.profile.fetch&lt;br/&gt;fa:fa-download&quot;]

    Cart --&gt; CartItem[&quot;ğŸ“¦ cart.item.*&lt;br/&gt;fa:fa-box&quot;]
    Cart --&gt; CartCheckout[&quot;ğŸ’³ cart.checkout&lt;br/&gt;fa:fa-credit-card&quot;]

    CartItem --&gt; ItemAdd[&quot;â• cart.item.add&lt;br/&gt;fa:fa-plus-circle&quot;]
    CartItem --&gt; ItemRemove[&quot;â– cart.item.remove&lt;br/&gt;fa:fa-minus-circle&quot;]
    CartItem --&gt; ItemUpdate[&quot;ğŸ”„ cart.item.update&lt;br/&gt;fa:fa-sync-alt&quot;]

    App --&gt; AppTheme[&quot;ğŸ¨ app.theme.change&lt;br/&gt;fa:fa-palette&quot;]
    App --&gt; AppRoute[&quot;ğŸ§­ app.route.change&lt;br/&gt;fa:fa-route&quot;]
    App --&gt; AppError[&quot;âš ï¸ app.error&lt;br/&gt;fa:fa-exclamation-triangle&quot;]

    classDef root fill:#764ba2,stroke:#6a3f99,stroke-width:4px,color:#fff,font-weight:bold
    classDef namespace fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef event fill:#48bb78,stroke:#38a169,stroke-width:2px,color:#fff

    class Root root
    class User,Cart,App,UserAuth,UserProfile,CartItem namespace
    class Login,Logout,Refresh,ProfileUpdate,ProfileFetch,ItemAdd,ItemRemove,ItemUpdate,AppTheme,AppRoute,AppError,CartCheckout event</code></pre>
<h2>Wildcard Subscription Matching</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;secondaryColor&#039;:&#039;#48bb78&#039;,&#039;tertiaryColor&#039;:&#039;#f56565&#039;}}}%%
graph LR
    subgraph Events[&quot;ğŸ“¡ Published Events&quot;]
        E1[&quot;ğŸ”‘ user.login&lt;br/&gt;fa:fa-sign-in-alt&quot;]
        E2[&quot;ğŸšª user.logout&lt;br/&gt;fa:fa-sign-out-alt&quot;]
        E3[&quot;âœï¸ user.profile.update&lt;br/&gt;fa:fa-edit&quot;]
        E4[&quot;â• cart.item.add&lt;br/&gt;fa:fa-plus-circle&quot;]
    end

    subgraph Subs[&quot;ğŸ“¥ Subscriptions&quot;]
        S1[&quot;ğŸ¯ subscribe(&#039;user.login&#039;)&lt;br/&gt;fa:fa-bullseye&quot;]
        S2[&quot;ğŸ‘¤ subscribe(&#039;user.*&#039;)&lt;br/&gt;fa:fa-user&quot;]
        S3[&quot;ğŸ”„ subscribe(&#039;*.update&#039;)&lt;br/&gt;fa:fa-sync-alt&quot;]
        S4[&quot;ğŸŒŸ subscribe(&#039;*&#039;)&lt;br/&gt;fa:fa-star&quot;]
    end

    E1 -.âœ… matches.-&gt; S1
    E1 -.âœ… matches.-&gt; S2
    E1 -.âœ… matches.-&gt; S4

    E2 -.âœ… matches.-&gt; S2
    E2 -.âœ… matches.-&gt; S4

    E3 -.âœ… matches.-&gt; S2
    E3 -.âœ… matches.-&gt; S3
    E3 -.âœ… matches.-&gt; S4

    E4 -.âœ… matches.-&gt; S4

    classDef event fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef specific fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold
    classDef catchall fill:#f56565,stroke:#e53e3e,stroke-width:3px,color:#fff,font-weight:bold

    class E1,E2,E3,E4 event
    class S1,S2,S3 specific
    class S4 catchall</code></pre>
<h2>Request/Response Pattern</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;actorBkg&#039;:&#039;#667eea&#039;,&#039;actorBorder&#039;:&#039;#5568d3&#039;,&#039;actorTextColor&#039;:&#039;#fff&#039;,&#039;signalColor&#039;:&#039;#764ba2&#039;}}}%%
sequenceDiagram
    participant Requester as âš™ï¸ Component A&lt;br/&gt;fa:fa-cube
    participant PAN as ğŸšŒ PAN Bus&lt;br/&gt;fa:fa-broadcast-tower
    participant Responder as ğŸ” Auth Service&lt;br/&gt;fa:fa-shield-alt

    Note over Responder: ğŸ“ Registers responder
    Responder-&gt;&gt;PAN: ğŸ¯ respond(&#039;auth.token.get&#039;, handler)

    Note over Requester: ğŸ”‘ Needs auth token
    Requester-&gt;&gt;+PAN: â“ request(&#039;auth.token.get&#039;)

    PAN-&gt;&gt;PAN: ğŸ†” Generate response ID
    PAN-&gt;&gt;+Responder: â–¶ï¸ Trigger handler

    Note over Responder: ğŸ’¾ Get token from storage
    Responder-&gt;&gt;Responder: ğŸ” Get token from storage
    Responder-&gt;&gt;-PAN: ğŸ“¤ publish response

    PAN-&gt;&gt;-Requester: âœ… Return token

    Note over Requester: ğŸŒ Uses token for API call
    Requester-&gt;&gt;API: ğŸ”Œ GET /api/data&lt;br/&gt;Authorization: Bearer {token}</code></pre>
<h2>Event Patterns Comparison</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;secondaryColor&#039;:&#039;#764ba2&#039;,&#039;tertiaryColor&#039;:&#039;#48bb78&#039;}}}%%
graph TB
    subgraph FF[&quot;ğŸ“¢ Fire and Forget&quot;]
        FF1[&quot;ğŸ“¤ Publisher&lt;br/&gt;fa:fa-paper-plane&quot;]
        FF2[&quot;ğŸšŒ PAN Bus&lt;br/&gt;fa:fa-broadcast-tower&quot;]
        FF3[&quot;ğŸ“¥ Subscribers&lt;br/&gt;fa:fa-inbox&quot;]

        FF1 --&gt;|ğŸ“¢ publish| FF2
        FF2 --&gt;|ğŸ“¬ notify all| FF3
        FF1 -.-x|âš¡ no wait| FF3
    end

    subgraph RR[&quot;â“ Request/Response&quot;]
        RR1[&quot;â“ Requester&lt;br/&gt;fa:fa-question&quot;]
        RR2[&quot;ğŸšŒ PAN Bus&lt;br/&gt;fa:fa-broadcast-tower&quot;]
        RR3[&quot;ğŸ’¬ Responder&lt;br/&gt;fa:fa-comment-dots&quot;]

        RR1 --&gt;|â“ request| RR2
        RR2 --&gt;|â–¶ï¸ invoke| RR3
        RR3 --&gt;|âœ… respond| RR2
        RR2 --&gt;|ğŸ“¦ return| RR1
    end

    subgraph CMD[&quot;âš™ï¸ Command&quot;]
        C1[&quot;ğŸ‘¨â€ğŸ’¼ Commander&lt;br/&gt;fa:fa-user-tie&quot;]
        C2[&quot;ğŸšŒ PAN Bus&lt;br/&gt;fa:fa-broadcast-tower&quot;]
        C3[&quot;âš™ï¸ Handler&lt;br/&gt;fa:fa-cog&quot;]

        C1 --&gt;|ğŸ“‹ command| C2
        C2 --&gt;|â–¶ï¸ execute| C3
        C3 --&gt;|âœ… acknowledge| C2
        C2 -.ğŸ’¬ optional.-&gt; C1
    end

    classDef bus1 fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef bus2 fill:#764ba2,stroke:#6a3f99,stroke-width:3px,color:#fff,font-weight:bold
    classDef bus3 fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold

    class FF2 bus1
    class RR2 bus2
    class C2 bus3</code></pre>
<h2>PAN Bus Internal Architecture</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#764ba2&#039;,&#039;secondaryColor&#039;:&#039;#667eea&#039;,&#039;tertiaryColor&#039;:&#039;#48bb78&#039;}}}%%
graph TB
    subgraph Core[&quot;âš™ï¸ PAN Bus Core&quot;]
        Router[&quot;ğŸ“¡ Topic Router&lt;br/&gt;fa:fa-broadcast-tower&quot;]

        subgraph Registry[&quot;ğŸ“š Subscription Registry&quot;]
            Exact[&quot;ğŸ¯ Exact Matches&lt;br/&gt;fa:fa-bullseye&lt;br/&gt;Mapâ€¹topic, Setâ€¹handlerâ€ºâ€º&quot;]
            Wildcard[&quot;ğŸŒŸ Wildcard Patterns&lt;br/&gt;fa:fa-star&lt;br/&gt;Array of patterns and handlers&quot;]
        end

        subgraph Queue[&quot;ğŸ“® Message Queue&quot;]
            EventQueue[&quot;ğŸ“¥ Event Queue&lt;br/&gt;fa:fa-inbox&quot;]
            Batch[&quot;ğŸ“¦ Batch Processor&lt;br/&gt;fa:fa-boxes&quot;]
        end

        Router --&gt; Exact
        Router --&gt; Wildcard
        Router --&gt; EventQueue
        EventQueue --&gt; Batch
    end

    subgraph API[&quot;ğŸ”§ API Methods&quot;]
        Publish[&quot;ğŸ“¢ publish&lt;br/&gt;fa:fa-bullhorn&quot;]
        Subscribe[&quot;ğŸ“¥ subscribe&lt;br/&gt;fa:fa-rss&quot;]
        Request[&quot;â“ request&lt;br/&gt;fa:fa-question-circle&quot;]
        Respond[&quot;ğŸ’¬ respond&lt;br/&gt;fa:fa-comment&quot;]
    end

    Publish --&gt; Router
    Subscribe --&gt; Exact &amp; Wildcard
    Request --&gt; Router
    Respond --&gt; Router

    classDef router fill:#764ba2,stroke:#6a3f99,stroke-width:4px,color:#fff,font-weight:bold
    classDef registry fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef queue fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold
    classDef api fill:#4299e1,stroke:#3182ce,stroke-width:2px,color:#fff

    class Router router
    class Exact,Wildcard registry
    class EventQueue,Batch queue
    class Publish,Subscribe,Request,Respond api</code></pre>
<h2>Debugging with Event Inspector</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;secondaryColor&#039;:&#039;#ed8936&#039;,&#039;tertiaryColor&#039;:&#039;#48bb78&#039;}}}%%
graph TB
    subgraph Application[&quot;ğŸ“± Application&quot;]
        C1[&quot;âš™ï¸ Component 1&lt;br/&gt;fa:fa-cube&quot;]
        C2[&quot;âš™ï¸ Component 2&lt;br/&gt;fa:fa-cube&quot;]
        C3[&quot;âš™ï¸ Component 3&lt;br/&gt;fa:fa-cube&quot;]
    end

    subgraph PAN[&quot;ğŸšŒ PAN Bus&quot;]
        Router[&quot;ğŸ“¡ Message Router&lt;br/&gt;fa:fa-broadcast-tower&quot;]
    end

    subgraph Inspector[&quot;ğŸ” Inspector&quot;]
        Monitor[&quot;ğŸ‘€ subscribe(&#039;*&#039;)&lt;br/&gt;fa:fa-eye&quot;]
        Log[&quot;ğŸ“‹ Event Log&lt;br/&gt;fa:fa-list&quot;]
        Filter[&quot;ğŸ” Filter Panel&lt;br/&gt;fa:fa-filter&quot;]
        Viz[&quot;ğŸ“Š Visualization&lt;br/&gt;fa:fa-chart-bar&quot;]
    end

    C1 --&gt;|ğŸ“¢ publish| Router
    C2 --&gt;|ğŸ“¢ publish| Router
    C3 --&gt;|ğŸ“¢ publish| Router

    Router --&gt;|ğŸ“¬ notify| C1
    Router --&gt;|ğŸ“¬ notify| C2
    Router --&gt;|ğŸ“¬ notify| C3

    Router -.ğŸ” all events.-&gt; Monitor
    Monitor --&gt; Log
    Log --&gt; Filter
    Log --&gt; Viz

    classDef component fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef pan fill:#764ba2,stroke:#6a3f99,stroke-width:3px,color:#fff,font-weight:bold
    classDef inspector fill:#ed8936,stroke:#dd6b20,stroke-width:3px,color:#fff,font-weight:bold
    classDef viz fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold

    class C1,C2,C3 component
    class Router pan
    class Monitor,Log,Filter inspector
    class Viz viz</code></pre>
<h2>Event Lifecycle</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;primaryTextColor&#039;:&#039;#fff&#039;,&#039;primaryBorderColor&#039;:&#039;#5568d3&#039;}}}%%
stateDiagram-v2
    [*] --&gt; Published: ğŸ“¢ publish(topic, data)
    Published --&gt; Routing: ğŸ§­ Route to subscribers
    Routing --&gt; MatchExact: ğŸ¯ Check exact matches
    Routing --&gt; MatchWildcard: ğŸŒŸ Check wildcards

    MatchExact --&gt; Notify: âœ… Found subscribers
    MatchWildcard --&gt; Notify: âœ… Found subscribers

    MatchExact --&gt; Complete: âŒ No matches
    MatchWildcard --&gt; Complete: âŒ No matches

    Notify --&gt; HandleAsync: âš¡ Async handlers
    Notify --&gt; HandleSync: ğŸ”„ Sync handlers

    HandleAsync --&gt; Complete: âœ…
    HandleSync --&gt; Complete: âœ…

    Complete --&gt; [*]

    note right of Routing
        ğŸ“‹ Look up topic in registry
        ğŸŒŸ Match wildcards
        ğŸ“¥ Collect all handlers
    end note

    note right of Notify
        ğŸ“ Call each handler
        ğŸ“¦ Pass message data
        âš ï¸ Handle errors
    end note</code></pre>
<h2>Error Handling in PAN Bus</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;secondaryColor&#039;:&#039;#f56565&#039;,&#039;tertiaryColor&#039;:&#039;#48bb78&#039;}}}%%
graph TB
    Publisher[&quot;ğŸ“¤ Publisher&lt;br/&gt;fa:fa-paper-plane&quot;]
    PAN[&quot;ğŸšŒ PAN Bus&lt;br/&gt;fa:fa-broadcast-tower&quot;]

    Publisher --&gt;|ğŸ“¢ publish| PAN

    PAN --&gt; S1[&quot;ğŸ“¥ Subscriber 1&lt;br/&gt;fa:fa-inbox&quot;]
    PAN --&gt; S2[&quot;ğŸ“¥ Subscriber 2&lt;br/&gt;fa:fa-inbox&quot;]
    PAN --&gt; S3[&quot;ğŸ“¥ Subscriber 3&lt;br/&gt;fa:fa-inbox&quot;]

    S1 --&gt;|âœ… success| End1[&quot;âœ…&lt;br/&gt;fa:fa-check-circle&quot;]
    S2 --&gt;|ğŸ’¥ throws error| Error[&quot;âš ï¸ Error Handler&lt;br/&gt;fa:fa-exclamation-triangle&quot;]
    S3 --&gt;|âœ… success| End3[&quot;âœ…&lt;br/&gt;fa:fa-check-circle&quot;]

    Error --&gt;|ğŸ“ log error| Console[&quot;ğŸ–¥ï¸ Console&lt;br/&gt;fa:fa-terminal&quot;]
    Error --&gt;|ğŸ“¢ publish| ErrorTopic[&quot;âŒ app.error&lt;br/&gt;fa:fa-times-circle&quot;]

    ErrorTopic --&gt; ErrorHandler[&quot;âš ï¸ Error Component&lt;br/&gt;fa:fa-bug&quot;]

    Error -.ğŸ”„ doesn&#039;t stop.-&gt; S3

    classDef success fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold
    classDef error fill:#f56565,stroke:#e53e3e,stroke-width:3px,color:#fff,font-weight:bold
    classDef pan fill:#764ba2,stroke:#6a3f99,stroke-width:3px,color:#fff,font-weight:bold
    classDef neutral fill:#667eea,stroke:#5568d3,stroke-width:2px,color:#fff

    class End1,End3 success
    class Error,ErrorTopic,ErrorHandler error
    class PAN pan
    class Publisher,S1,S2,S3 neutral</code></pre>
      </article>
      <footer class="docs-footer">
        <a href="https://github.com/chrisrobison/pan/edit/main/books/learning-larc/diagrams/05-pan-bus.md" target="_blank">
          Edit this page on GitHub
        </a>
      </footer>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha384-F/bZzf7p3Joyp5psL90p/p89AZJsndkSoGwRpXcZhleCWhd8SnRuoYo4d0yirjJp" crossorigin="anonymous"></script>
  <script src="../assets/docs.js"></script>
</body>
</html>