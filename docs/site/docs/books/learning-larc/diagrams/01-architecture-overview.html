<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LARC Architecture Overview Â· PAN Documentation</title>
  <meta name="description" content="PAN (Page Area Network) Documentation - LARC Architecture Overview">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/theme.css">
  <link rel="stylesheet" href="../assets/docs.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" integrity="sha384-wH75j6z1lH97ZOpMOInqhgKzFkAInZPPSPlZpYKYTOqsaizPvhQZmAtLcPKXpLyH" crossorigin="anonymous">
</head>
<body>
  <header class="docs-header">
    <div class="docs-header-content">
      <a href="../index.html" class="logo">
        <span>PAN</span>
      </a>
      <nav class="docs-nav">
        <a href="../index.html">Home</a>
        <a href="index.html" class="active">Docs</a>
        <a href="../examples.html">Examples</a>
        <a href="../apps.html">Apps</a>
        <a href="https://github.com/chrisrobison/pan" target="_blank">GitHub</a>
      </nav>
    </div>
  </header>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <div class="docs-sidebar-content">
        <h3>Documentation</h3>
        <nav class="docs-menu" id="docs-menu">
          <!-- Will be populated by JavaScript -->
        </nav>
      </div>
    </aside>

    <main class="docs-main">
      <div class="docs-breadcrumb">
        <a href="../index.html">Home</a> / <a href="#">books</a> / <a href="#">learning-larc</a> / <a href="#">diagrams</a> / <span>01-architecture-overview</span>
      </div>
      <article class="docs-content">
        <h1>LARC Architecture Overview</h1>
<h2>High-Level Architecture</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;primaryTextColor&#039;:&#039;#fff&#039;,&#039;primaryBorderColor&#039;:&#039;#5568d3&#039;,&#039;lineColor&#039;:&#039;#764ba2&#039;,&#039;secondaryColor&#039;:&#039;#48bb78&#039;,&#039;tertiaryColor&#039;:&#039;#ed8936&#039;}}}%%
graph TB
    subgraph Browser[&quot;ğŸŒ Browser&quot;]
        subgraph App[&quot;ğŸ“¦ LARC Application&quot;]
            HTML[&quot;ğŸ“„ HTML Document&lt;br/&gt;fa:fa-file-code&quot;]
            IM[&quot;ğŸ—ºï¸ Import Map&lt;br/&gt;fa:fa-map&quot;]

            subgraph Components[&quot;ğŸ§© Components Layer&quot;]
                C1[&quot;âš™ï¸ Component 1&lt;br/&gt;fa:fa-cube&quot;]
                C2[&quot;âš™ï¸ Component 2&lt;br/&gt;fa:fa-cube&quot;]
                C3[&quot;âš™ï¸ Component 3&lt;br/&gt;fa:fa-cube&quot;]
                C4[&quot;âš™ï¸ Component N...&lt;br/&gt;fa:fa-cubes&quot;]
            end

            subgraph Comm[&quot;ğŸ’¬ Communication Layer&quot;]
                PAN[&quot;ğŸšŒ PAN Bus&lt;br/&gt;fa:fa-broadcast-tower&lt;br/&gt;Pub/Sub System&quot;]
            end

            subgraph State[&quot;ğŸ’¾ State Layer&quot;]
                LS[&quot;ğŸ“ Local State&lt;br/&gt;fa:fa-sticky-note&quot;]
                SS[&quot;ğŸ”— Shared State&lt;br/&gt;fa:fa-share-nodes&quot;]
                PS[&quot;ğŸ’¿ Persistent State&lt;br/&gt;fa:fa-database&lt;br/&gt;localStorage/IndexedDB&quot;]
            end

            subgraph Router[&quot;ğŸ§­ Router Layer&quot;]
                R[&quot;ğŸ—ºï¸ pan-router&lt;br/&gt;fa:fa-route&quot;]
            end
        end

        subgraph APIs[&quot;ğŸ”§ Browser APIs&quot;]
            CE[&quot;ğŸ·ï¸ Custom Elements&lt;br/&gt;fa:fa-tags&quot;]
            SD[&quot;ğŸ‘ï¸ Shadow DOM&lt;br/&gt;fa:fa-eye-slash&quot;]
            ESM[&quot;ğŸ“¦ ES Modules&lt;br/&gt;fa:fa-box&quot;]
            F[&quot;ğŸŒ Fetch API&lt;br/&gt;fa:fa-download&quot;]
            WS[&quot;ğŸ”Œ WebSocket&lt;br/&gt;fa:fa-plug&quot;]
        end
    end

    subgraph External[&quot;â˜ï¸ External Services&quot;]
        CDN[&quot;ğŸŒ CDN&lt;br/&gt;fa:fa-cloud&lt;br/&gt;jsDelivr/unpkg&quot;]
        API[&quot;ğŸ”Œ REST API&lt;br/&gt;fa:fa-server&quot;]
        WSS[&quot;ğŸ”Œ WebSocket Server&lt;br/&gt;fa:fa-network-wired&quot;]
    end

    HTML --&gt; IM
    IM --&gt; C1 &amp; C2 &amp; C3 &amp; C4
    C1 &amp; C2 &amp; C3 &amp; C4 &lt;--&gt; PAN
    C1 &amp; C2 &amp; C3 &amp; C4 --&gt; LS
    PAN &lt;--&gt; SS
    SS &lt;--&gt; PS
    C1 &amp; C2 &amp; C3 &amp; C4 --&gt; CE &amp; SD &amp; ESM
    C1 &amp; C2 &amp; C3 &amp; C4 --&gt; R

    IM -.loads from.-&gt; CDN
    C1 &amp; C2 &amp; C3 &amp; C4 -.HTTP.-&gt; API
    C1 &amp; C2 &amp; C3 &amp; C4 -.WebSocket.-&gt; WSS

    classDef primary fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef secondary fill:#764ba2,stroke:#6a3f99,stroke-width:3px,color:#fff,font-weight:bold
    classDef success fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold
    classDef warning fill:#ed8936,stroke:#dd6b20,stroke-width:3px,color:#fff,font-weight:bold
    classDef info fill:#4299e1,stroke:#3182ce,stroke-width:3px,color:#fff,font-weight:bold

    class HTML,IM,R primary
    class PAN secondary
    class SS,PS,CDN success
    class API,WSS warning
    class C1,C2,C3,C4 info</code></pre>
<h2>Component Communication Flow</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;actorBkg&#039;:&#039;#667eea&#039;,&#039;actorBorder&#039;:&#039;#5568d3&#039;,&#039;actorTextColor&#039;:&#039;#fff&#039;,&#039;signalColor&#039;:&#039;#764ba2&#039;,&#039;signalTextColor&#039;:&#039;#2d3748&#039;,&#039;labelBoxBkgColor&#039;:&#039;#f7fafc&#039;,&#039;labelBoxBorderColor&#039;:&#039;#cbd5e0&#039;}}}%%
sequenceDiagram
    participant U as ğŸ‘¤ User&lt;br/&gt;fa:fa-user
    participant C1 as âš™ï¸ Component 1&lt;br/&gt;fa:fa-cube
    participant PAN as ğŸšŒ PAN Bus&lt;br/&gt;fa:fa-broadcast-tower
    participant C2 as âš™ï¸ Component 2&lt;br/&gt;fa:fa-cube
    participant C3 as âš™ï¸ Component 3&lt;br/&gt;fa:fa-cube
    participant API as ğŸ”Œ Backend API&lt;br/&gt;fa:fa-server

    U-&gt;&gt;+C1: ğŸ–±ï¸ Click Button
    Note over C1: Handle user event
    C1-&gt;&gt;+PAN: ğŸ“¢ publish(&#039;user.action&#039;, data)
    Note over PAN: Broadcast to subscribers

    PAN--&gt;&gt;C2: ğŸ“¬ notify subscriber
    PAN--&gt;&gt;-C3: ğŸ“¬ notify subscriber

    Note over C2: Process event
    C2-&gt;&gt;C2: ğŸ¨ Update UI

    Note over C3: Fetch data
    C3-&gt;&gt;+API: ğŸŒ fetch(&#039;/api/data&#039;)
    API--&gt;&gt;-C3: âœ… Response
    C3-&gt;&gt;+PAN: ğŸ“¢ publish(&#039;data.loaded&#039;, result)

    PAN--&gt;&gt;C1: ğŸ“¬ notify subscriber
    PAN--&gt;&gt;-C2: ğŸ“¬ notify subscriber

    Note over C1,C2: Render updates
    C1-&gt;&gt;-C1: ğŸ¨ Update UI
    C2-&gt;&gt;C2: ğŸ¨ Update UI</code></pre>
<h2>No-Build Architecture</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;primaryTextColor&#039;:&#039;#fff&#039;,&#039;secondaryColor&#039;:&#039;#f56565&#039;,&#039;tertiaryColor&#039;:&#039;#48bb78&#039;}}}%%
graph LR
    subgraph Traditional[&quot;âš™ï¸ Traditional Framework&quot;]
        S1[&quot;ğŸ“ Source Code&lt;br/&gt;fa:fa-file-code&quot;]
        T1[&quot;ğŸ”„ Transpile&lt;br/&gt;fa:fa-exchange-alt&lt;br/&gt;Babel&quot;]
        B1[&quot;ğŸ“¦ Bundle&lt;br/&gt;fa:fa-box&lt;br/&gt;Webpack&quot;]
        M1[&quot;ğŸ—œï¸ Minify&lt;br/&gt;fa:fa-compress&quot;]
        O1[&quot;ğŸ“¤ Output&lt;br/&gt;fa:fa-upload&quot;]

        S1 --&gt; T1 --&gt; B1 --&gt; M1 --&gt; O1
    end

    subgraph LARC[&quot;âš¡ LARC&quot;]
        S2[&quot;ğŸ“ Source Code&lt;br/&gt;fa:fa-file-code&quot;]
        BR[&quot;ğŸŒ Browser&lt;br/&gt;fa:fa-globe&quot;]

        S2 -.âš¡ directly loads.-&gt; BR
    end

    classDef source fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef browser fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold
    classDef output fill:#f56565,stroke:#e53e3e,stroke-width:3px,color:#fff,font-weight:bold
    classDef process fill:#ed8936,stroke:#dd6b20,stroke-width:2px,color:#fff

    class S2,S1 source
    class BR browser
    class O1 output
    class T1,B1,M1 process</code></pre>
<h2>Module Loading with Import Maps</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;secondaryColor&#039;:&#039;#48bb78&#039;,&#039;tertiaryColor&#039;:&#039;#4299e1&#039;}}}%%
graph TB
    subgraph HTML[&quot;ğŸ“„ index.html&quot;]
        IM[&quot;ğŸ—ºï¸ Import Map&lt;br/&gt;fa:fa-map&lt;br/&gt;&amp;lt;script type=&#039;importmap&#039;&amp;gt;&lt;br/&gt;{&lt;br/&gt;  &#039;@larcjs/core&#039;: &#039;https://cdn...&#039;,&lt;br/&gt;  &#039;app/&#039;: &#039;/src/&#039;&lt;br/&gt;}&quot;]
        SM[&quot;ğŸ“œ Module Script&lt;br/&gt;fa:fa-scroll&lt;br/&gt;&amp;lt;script type=&#039;module&#039;&amp;gt;&lt;br/&gt;import &#039;@larcjs/core&#039;&lt;br/&gt;import &#039;app/components/...&#039;&quot;]
    end

    subgraph Resolution[&quot;ğŸ” Resolution&quot;]
        IM --&gt; R1[&quot;ğŸ” Resolve @larcjs/core&lt;br/&gt;fa:fa-search&quot;]
        IM --&gt; R2[&quot;ğŸ” Resolve app/&lt;br/&gt;fa:fa-search&quot;]

        R1 --&gt; CDN[&quot;ğŸŒ Load from CDN&lt;br/&gt;fa:fa-cloud&quot;]
        R2 --&gt; Local[&quot;ğŸ’¾ Load from /src/&lt;br/&gt;fa:fa-folder&quot;]
    end

    subgraph Browser[&quot;ğŸŒ Browser&quot;]
        CDN --&gt; Cache1[&quot;âš¡ Browser Cache&lt;br/&gt;fa:fa-bolt&quot;]
        Local --&gt; Cache2[&quot;âš¡ Browser Cache&lt;br/&gt;fa:fa-bolt&quot;]

        Cache1 --&gt; Exec[&quot;â–¶ï¸ Execute Modules&lt;br/&gt;fa:fa-play&quot;]
        Cache2 --&gt; Exec
    end

    classDef primary fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef success fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold
    classDef info fill:#4299e1,stroke:#3182ce,stroke-width:3px,color:#fff,font-weight:bold

    class IM,SM primary
    class Exec success
    class R1,R2,CDN,Local info</code></pre>
<h2>Deployment Architecture</h2>
<pre><code class="language-mermaid">%%{init: {&#039;theme&#039;:&#039;base&#039;, &#039;themeVariables&#039;: { &#039;primaryColor&#039;:&#039;#667eea&#039;,&#039;secondaryColor&#039;:&#039;#48bb78&#039;,&#039;tertiaryColor&#039;:&#039;#764ba2&#039;}}}%%
graph TB
    subgraph Dev[&quot;ğŸ‘¨â€ğŸ’» Development&quot;]
        Developer[&quot;ğŸ‘¤ Developer&lt;br/&gt;fa:fa-user-tie&quot;]
        Code[&quot;ğŸ“ Source Code&lt;br/&gt;fa:fa-code&quot;]
        Git[&quot;ğŸ—‚ï¸ Git Repository&lt;br/&gt;fa:fa-git-alt&quot;]

        Developer --&gt;|âœï¸ writes| Code
        Code --&gt;|ğŸ“¤ commits| Git
    end

    subgraph CICD[&quot;ğŸ”„ CI/CD Pipeline&quot;]
        GH[&quot;âš™ï¸ GitHub Actions&lt;br/&gt;fa:fa-cog&quot;]
        Test[&quot;ğŸ§ª Run Tests&lt;br/&gt;fa:fa-flask&quot;]
        Build[&quot;ğŸ—ï¸ Optional Build&lt;br/&gt;fa:fa-hammer&lt;br/&gt;Minify&quot;]

        Git --&gt;|âš¡ triggers| GH
        GH --&gt; Test
        Test --&gt; Build
    end

    subgraph Prod[&quot;â˜ï¸ Production&quot;]
        CDN[&quot;ğŸŒ CDN&lt;br/&gt;fa:fa-cloud&lt;br/&gt;CloudFlare/AWS&quot;]
        Static[&quot;ğŸ“¦ Static Host&lt;br/&gt;fa:fa-server&lt;br/&gt;Netlify/Vercel&quot;]

        Build --&gt;|ğŸš€ deploy assets| CDN
        Build --&gt;|ğŸš€ deploy app| Static
    end

    subgraph Users[&quot;ğŸ‘¥ Users&quot;]
        Browser[&quot;ğŸŒ Browser&lt;br/&gt;fa:fa-globe&quot;]

        Static --&gt;|ğŸ“„ HTML| Browser
        CDN --&gt;|ğŸ“¦ JS/CSS/Assets| Browser
    end

    classDef developer fill:#667eea,stroke:#5568d3,stroke-width:3px,color:#fff,font-weight:bold
    classDef production fill:#48bb78,stroke:#38a169,stroke-width:3px,color:#fff,font-weight:bold
    classDef user fill:#764ba2,stroke:#6a3f99,stroke-width:3px,color:#fff,font-weight:bold
    classDef cicd fill:#ed8936,stroke:#dd6b20,stroke-width:3px,color:#fff,font-weight:bold

    class Code,Developer,Git developer
    class Static,CDN production
    class Browser user
    class GH,Test,Build cicd</code></pre>
      </article>
      <footer class="docs-footer">
        <a href="https://github.com/chrisrobison/pan/edit/main/books/learning-larc/diagrams/01-architecture-overview.md" target="_blank">
          Edit this page on GitHub
        </a>
      </footer>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha384-F/bZzf7p3Joyp5psL90p/p89AZJsndkSoGwRpXcZhleCWhd8SnRuoYo4d0yirjJp" crossorigin="anonymous"></script>
  <script src="../assets/docs.js"></script>
</body>
</html>