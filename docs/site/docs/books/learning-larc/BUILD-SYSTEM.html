<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- CRITICAL: Load theme BEFORE CSS to prevent flash -->
  <script src="../../../../../playground/theme-init.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Learning LARC - Build System Â· PAN Documentation</title>
  <meta name="description" content="PAN (Page Area Network) Documentation - Learning LARC - Build System">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/theme.css">
  <link rel="stylesheet" href="../assets/docs.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" integrity="sha384-wH75j6z1lH97ZOpMOInqhgKzFkAInZPPSPlZpYKYTOqsaizPvhQZmAtLcPKXpLyH" crossorigin="anonymous">
</head>
<body>
  <header class="docs-header">
    <div class="docs-header-content">
      <a href="../index.html" class="logo">
        <span>PAN</span>
      </a>
      <nav class="docs-nav">
        <a href="../index.html">Home</a>
        <a href="index.html" class="active">Docs</a>
        <a href="../examples.html">Examples</a>
        <a href="../apps.html">Apps</a>
        <a href="https://github.com/chrisrobison/pan" target="_blank">GitHub</a>
      </nav>
    </div>
  </header>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <div class="docs-sidebar-content">
        <h3>Documentation</h3>
        <nav class="docs-menu" id="docs-menu">
          <!-- Will be populated by JavaScript -->
        </nav>
      </div>
    </aside>

    <main class="docs-main">
      <div class="docs-breadcrumb">
        <a href="../index.html">Home</a> / <a href="#">books</a> / <a href="#">learning-larc</a> / <span>BUILD-SYSTEM</span>
      </div>
      <article class="docs-content">
        <h1>Learning LARC - Build System</h1>
<p>Complete build system for generating "Learning LARC" in multiple formats with your hand-drawn Lark cover!</p>
<h2>âœ¨ Features</h2>
<ul><li>ğŸ“„ <strong>HTML</strong> - Responsive, syntax-highlighted, with TOC</li>
<li>ğŸ“• <strong>PDF</strong> - Print-ready with professional formatting</li>
<li>ğŸ“± <strong>EPUB</strong> - E-reader compatible with your Lark cover image</li>
<li>ğŸ¨ <strong>Diagram Conversion</strong> - Automatically converts Mermaid diagrams</li>
<li>ğŸ–¼ï¸ <strong>Cover Support</strong> - Uses <code>larc-book.png</code> or <code>cover.png</code></li>
<li>ğŸ“ <strong>Complete Book</strong> - Includes front matter, foreword, all chapters, author bio, and back cover</li>
</ul>
<h2>ğŸš€ Quick Start</h2>
<pre><code class="language-bash"># Install dependencies (one time)
brew install pandoc
brew install --cask mactex-no-gui
npm install -g @mermaid-js/mermaid-cli  # optional, for diagrams

# Build all formats
./build-book.sh

# Or use Make
make

# Or use npm
npm run build</code></pre>
<h2>ğŸ“ Files Created</h2>
<h3>Core Build Files</h3>
<li><strong><code>build-book.sh</code></strong> - Enhanced build script with color output</li>
<li><strong><code>Makefile</code></strong> - Simple make targets</li>
<li><strong><code>package.json</code></strong> - npm scripts</li>
<li><strong><code>QUICKSTART.md</code></strong> - 3-step quick start guide</li>
<li><strong><code>.gitignore</code></strong> - Build artifacts exclusion</li>
<h3>Input Files (Your Content)</h3>
<ul><li><code>00-front-matter.md</code> - Title page, copyright</li>
<li><code>foreword.md</code> - Book foreword</li>
<li><code>chapters/*.md</code> - 11 chapter files</li>
<li><code>author-bio.md</code> - About the author</li>
<li><code>back-cover.md</code> - Back cover content</li>
<li><code>diagrams/*.md</code> - Mermaid diagrams (auto-converted)</li>
<li><code>larc-book.png</code> - Your beautiful Lark cover (used for EPUB)</li>
</ul>
<h3>Output Files (Generated)</h3>
<ul><li><code>build/output/learning-larc.html</code> - HTML version</li>
<li><code>build/output/learning-larc.pdf</code> - PDF version</li>
<li><code>build/output/learning-larc.epub</code> - EPUB with cover</li>
<li><code>build/output/images/</code> - Converted diagram images</li>
<li><code>build/output/book-style.css</code> - Styling</li>
</ul>
<h2>ğŸ¯ Usage</h2>
<h3>Three Ways to Build</h3>
<p>#### 1. Shell Script (Most Flexible)
<pre><code class="language-bash">./build-book.sh          # All formats
./build-book.sh html     # HTML only
./build-book.sh pdf      # PDF only
./build-book.sh epub     # EPUB only
./build-book.sh clean    # Clean artifacts</code></pre></p>
<p>#### 2. Make (Simplest)
<pre><code class="language-bash">make                     # All formats
make html                # HTML only
make pdf                 # PDF only
make epub                # EPUB only
make view                # Build HTML and open
make clean               # Clean artifacts</code></pre></p>
<p>#### 3. npm (Node Developers)
<pre><code class="language-bash">npm run build            # All formats
npm run build:html       # HTML only
npm run build:pdf        # PDF only
npm run build:epub       # EPUB only
npm run view:html        # Open HTML
npm run clean            # Clean artifacts</code></pre></p>
<h2>ğŸ¨ Customization</h2>
<h3>Using Your Cover Images</h3>
<p>The build script automatically detects:
<li><code>larc-book.png</code> (preferred) - Your main cover</li>
<li><code>cover.png</code> (fallback) - Alternative name</li></p>
<p>For EPUB, it will use whichever it finds first.</p>
<h3>Diagram Conversion</h3>
<p>Mermaid diagrams in <code>/diagrams/</code> are automatically converted to PNG images:
<ul><li>Width: 1200px</li>
<li>Background: Transparent</li>
<li>Output: <code>build/output/images/*.png</code></li>
</ul>
<h3>Styling</h3></p>
<p>Edit the CSS in <code>build-book.sh</code> around line 120 to customize:
<ul><li>Colors (primary: #667eea, secondary: #764ba2)</li>
<li>Typography</li>
<li>Code block styling</li>
<li>Responsive breakpoints</li>
</ul>
<h2>ğŸ“Š Performance</h2></p>
<p>Build times on Apple M1 MacBook Pro:</p>
<p>| Format | Time     | Size      |
|--------|----------|-----------|
| HTML   | ~2 sec   | ~800 KB   |
| PDF    | ~20 sec  | ~2.5 MB   |
| EPUB   | ~4 sec   | ~600 KB   |
| <strong>All</strong>| <strong>~25s</strong> | <strong>~4 MB</strong> |</p>
<h2>ğŸ› ï¸ Technical Details</h2>
<h3>Dependencies</h3>
<strong>Required:</strong>
<ul><li>Pandoc 2.19+ - Document converter</li>
<li>pdflatex (TeX Live) - PDF generation</li>
</ul>
<strong>Optional:</strong>
<ul><li>Prince XML - Better PDF output</li>
<li>Mermaid CLI - Diagram conversion</li>
</ul>
<h3>Build Process</h3>
<li><strong>Check Dependencies</strong> - Verifies pandoc, pdflatex installed</li>
<li><strong>Setup Directories</strong> - Creates build/, output/, images/ directories</li>
<li><strong>Convert Diagrams</strong> - Mermaid â†’ PNG (if mermaid-cli available)</li>
<li><strong>Combine Chapters</strong> - Merges all markdown files in order</li>
<li><strong>Generate Metadata</strong> - Creates YAML frontmatter</li>
<li><strong>Build Formats</strong> - Pandoc â†’ HTML/PDF/EPUB</li>
<h3>File Structure</h3>
<pre><code class="language-plaintext">learning-larc/
â”œâ”€â”€ build-book.sh              # Enhanced build script
â”œâ”€â”€ Makefile                   # Make targets
â”œâ”€â”€ package.json               # npm scripts
â”œâ”€â”€ QUICKSTART.md              # Quick start guide
â”œâ”€â”€ BUILD-SYSTEM.md            # This file
â”œâ”€â”€ .gitignore                 # Excludes build artifacts
â”‚
â”œâ”€â”€ 00-front-matter.md         # Your content
â”œâ”€â”€ foreword.md
â”œâ”€â”€ chapters/
â”‚   â”œâ”€â”€ 01-philosophy-and-background.md
â”‚   â”œâ”€â”€ 02-core-concepts.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ diagrams/
â”‚   â””â”€â”€ *.md (Mermaid diagrams)
â”œâ”€â”€ author-bio.md
â”œâ”€â”€ back-cover.md
â”œâ”€â”€ larc-book.png              # Your Lark cover!
â”‚
â””â”€â”€ build/                     # Generated (gitignored)
    â”œâ”€â”€ metadata.yaml
    â”œâ”€â”€ epub-metadata.xml
    â”œâ”€â”€ images/                # Converted diagrams
    â”œâ”€â”€ temp/                  # Temporary files
    â””â”€â”€ output/               # Final outputs
        â”œâ”€â”€ learning-larc.html
        â”œâ”€â”€ learning-larc.pdf
        â”œâ”€â”€ learning-larc.epub
        â”œâ”€â”€ book-style.css
        â””â”€â”€ images/</code></pre>
<h2>ğŸ“ Features Breakdown</h2>
<h3>HTML Output</h3>
<ul><li>âœ… Responsive design</li>
<li>âœ… Syntax-highlighted code blocks</li>
<li>âœ… Collapsible table of contents</li>
<li>âœ… Section numbering</li>
<li>âœ… Print-friendly CSS</li>
<li>âœ… Self-contained with embedded CSS</li>
</ul>
<h3>PDF Output</h3>
<ul><li>âœ… Professional typography</li>
<li>âœ… Page numbers and headers</li>
<li>âœ… Linked table of contents</li>
<li>âœ… Section breaks</li>
<li>âœ… Print-ready (letter size, 11pt)</li>
<li>âœ… Syntax-highlighted code</li>
</ul>
<h3>EPUB Output</h3>
<ul><li>âœ… EPUB 3.0 standard</li>
<li>âœ… Your Lark cover image</li>
<li>âœ… Chapter navigation</li>
<li>âœ… Reflowable text</li>
<li>âœ… E-reader optimized</li>
<li>âœ… Metadata embedded</li>
</ul>
<h3>Diagram Support</h3>
<ul><li>âœ… Auto-converts Mermaid diagrams</li>
<li>âœ… 1200px width, transparent background</li>
<li>âœ… Fallback if mermaid-cli not installed</li>
<li>âœ… Diagrams included in all formats</li>
</ul>
<h2>ğŸ“š Comparison with Building LARC</h2>
<p>Both books now have identical build systems!</p>
<p>| Feature | Learning LARC | Building LARC |
|---------|--------------|---------------|
| HTML | âœ… | âœ… |
| PDF | âœ… | âœ… |
| EPUB | âœ… | âœ… |
| Cover Image | ğŸ¦ Lark | ğŸ¦« Beaver |
| Diagrams | âœ… Mermaid | âŒ N/A |
| Build Time | ~25s | ~30s |
| Build Script | Unified | Unified |
| Make/npm | âœ… | âœ… |</p>
<h2>ğŸ› Troubleshooting</h2>
<h3>"Command not found: pandoc"</h3>
<pre><code class="language-bash">brew install pandoc</code></pre>
<h3>"Command not found: pdflatex"</h3>
<pre><code class="language-bash">brew install --cask mactex-no-gui
export PATH=&quot;/Library/TeX/texbin:$PATH&quot;</code></pre>
<h3>Diagrams not converting</h3>
<pre><code class="language-bash">npm install -g @mermaid-js/mermaid-cli</code></pre>
<h3>Cover image not appearing in EPUB</h3>
Ensure you have either:
<ul><li><code>larc-book.png</code> in the book directory, OR</li>
<li><code>cover.png</code> in the book directory</li>
</ul>
<h3>PDF errors with LaTeX</h3>
Try using Prince XML instead:
<ul><li>Download from https://www.princexml.com/</li>
<li>Script auto-detects and uses it if available</li>
</ul>
<h2>ğŸ‰ Success!</h2>
<p>You now have a complete build system that:
<ul><li>âœ… Builds in 3 formats</li>
<li>âœ… Includes your hand-drawn cover</li>
<li>âœ… Converts diagrams automatically</li>
<li>âœ… Has three build interfaces</li>
<li>âœ… Is well documented</li>
<li>âœ… Matches "Building LARC" system</li>
</ul>
Run <code>./build-book.sh</code> and you're done! ğŸ“šğŸ¦</p>
      </article>
      <footer class="docs-footer">
        <a href="https://github.com/chrisrobison/pan/edit/main/books/learning-larc/BUILD-SYSTEM.md" target="_blank">
          Edit this page on GitHub
        </a>
      </footer>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha384-F/bZzf7p3Joyp5psL90p/p89AZJsndkSoGwRpXcZhleCWhd8SnRuoYo4d0yirjJp" crossorigin="anonymous"></script>
  <script src="../assets/docs.js"></script>
  <pan-bus debug="false"></pan-bus>
  <pan-theme-provider></pan-theme-provider>
</body>
</html>