<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Real-World Applications · PAN Documentation</title>
  <meta name="description" content="PAN (Page Area Network) Documentation - Real-World Applications">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/theme.css">
  <link rel="stylesheet" href="../assets/docs.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" integrity="sha384-wH75j6z1lH97ZOpMOInqhgKzFkAInZPPSPlZpYKYTOqsaizPvhQZmAtLcPKXpLyH" crossorigin="anonymous">
</head>
<body>
  <header class="docs-header">
    <div class="docs-header-content">
      <a href="../index.html" class="logo">
        <span>PAN</span>
      </a>
      <nav class="docs-nav">
        <a href="../index.html">Home</a>
        <a href="index.html" class="active">Docs</a>
        <a href="../examples.html">Examples</a>
        <a href="../apps.html">Apps</a>
        <a href="https://github.com/chrisrobison/pan" target="_blank">GitHub</a>
      </nav>
    </div>
  </header>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <div class="docs-sidebar-content">
        <h3>Documentation</h3>
        <nav class="docs-menu" id="docs-menu">
          <!-- Will be populated by JavaScript -->
        </nav>
      </div>
    </aside>

    <main class="docs-main">
      <div class="docs-breadcrumb">
        <a href="../index.html">Home</a> / <a href="#">books</a> / <a href="#">learning-larc</a> / <a href="#">chapters</a> / <span>19-real-world-applications</span>
      </div>
      <article class="docs-content">
        <h1>Real-World Applications</h1>
<p>Theory only takes you so far. Let's examine how LARC principles apply to real applications.</p>
<h2>Case Study: E-Commerce Platform</h2>
<p>An online store built with LARC demonstrates the architecture at scale.</p>
<h3>Architecture Overview</h3>
<pre><code class="language-plaintext">store/
├── index.html
├── components/
│   ├── product-card.js
│   ├── product-grid.js
│   ├── shopping-cart.js
│   ├── cart-item.js
│   ├── checkout-form.js
│   └── order-confirmation.js
├── services/
│   ├── cart-service.js
│   ├── product-service.js
│   └── order-service.js
└── styles/
    └── main.css</code></pre>
<h3>Product Catalog</h3>
<p>The product grid loads data and renders cards:</p>
<pre><code class="language-javascript">// product-grid.js
class ProductGrid extends HTMLElement {
  async connectedCallback() {
    this.innerHTML = &#039;&lt;p&gt;Loading products...&lt;/p&gt;&#039;;

    try {
      const products = await productService.getAll();
      this.render(products);
    } catch (error) {
      this.innerHTML = `&lt;p class=&quot;error&quot;&gt;Failed to load products&lt;/p&gt;`;
    }
  }

  render(products) {
    this.innerHTML = `
      &lt;div class=&quot;grid&quot;&gt;
        ${products.map(p =&gt; `
          &lt;product-card
            product-id=&quot;${p.id}&quot;
            name=&quot;${p.name}&quot;
            price=&quot;${p.price}&quot;
            image=&quot;${p.image}&quot;&gt;
          &lt;/product-card&gt;
        `).join(&#039;&#039;)}
      &lt;/div&gt;
    `;
  }
}</code></pre>
<h3>Shopping Cart</h3>
<p>The cart subscribes to add-to-cart events and persists state:</p>
<pre><code class="language-javascript">// shopping-cart.js
class ShoppingCart extends HTMLElement {
  constructor() {
    super();
    this.items = JSON.parse(localStorage.getItem(&#039;cart&#039;)) || [];
  }

  connectedCallback() {
    pan.subscribe(&#039;cart.add&#039;, ({ product }) =&gt; {
      this.addItem(product);
    });

    pan.subscribe(&#039;cart.remove&#039;, ({ productId }) =&gt; {
      this.removeItem(productId);
    });

    this.render();
  }

  addItem(product) {
    const existing = this.items.find(i =&gt; i.id === product.id);
    if (existing) {
      existing.quantity++;
    } else {
      this.items.push({ ...product, quantity: 1 });
    }
    this.save();
    this.render();
  }

  removeItem(productId) {
    this.items = this.items.filter(i =&gt; i.id !== productId);
    this.save();
    this.render();
  }

  save() {
    localStorage.setItem(&#039;cart&#039;, JSON.stringify(this.items));
    pan.publish(&#039;cart.updated&#039;, { items: this.items, total: this.total });
  }

  get total() {
    return this.items.reduce((sum, i) =&gt; sum + i.price * i.quantity, 0);
  }

  render() {
    this.innerHTML = `
      &lt;h2&gt;Cart (${this.items.length} items)&lt;/h2&gt;
      ${this.items.map(item =&gt; `
        &lt;cart-item
          product-id=&quot;${item.id}&quot;
          name=&quot;${item.name}&quot;
          price=&quot;${item.price}&quot;
          quantity=&quot;${item.quantity}&quot;&gt;
        &lt;/cart-item&gt;
      `).join(&#039;&#039;)}
      &lt;p class=&quot;total&quot;&gt;Total: $${this.total.toFixed(2)}&lt;/p&gt;
      &lt;button class=&quot;checkout-btn&quot;&gt;Checkout&lt;/button&gt;
    `;
  }
}</code></pre>
<h2>Case Study: Dashboard Application</h2>
<p>A data dashboard shows real-time metrics with role-based access.</p>
<h3>Real-Time Updates</h3>
<p>WebSocket messages update charts automatically:</p>
<pre><code class="language-javascript">// metrics-chart.js
class MetricsChart extends HTMLElement {
  connectedCallback() {
    this.data = [];

    pan.subscribe(&#039;ws.message.metrics&#039;, ({ value, timestamp }) =&gt; {
      this.data.push({ value, timestamp });
      if (this.data.length &gt; 100) this.data.shift();
      this.render();
    });

    this.render();
  }

  render() {
    // Render chart using canvas or SVG
    const canvas = this.querySelector(&#039;canvas&#039;) || document.createElement(&#039;canvas&#039;);
    if (!this.contains(canvas)) this.appendChild(canvas);

    const ctx = canvas.getContext(&#039;2d&#039;);
    // ... draw chart
  }
}</code></pre>
<h3>Role-Based Views</h3>
<p>Different users see different widgets:</p>
<pre><code class="language-javascript">// dashboard-page.js
class DashboardPage extends HTMLElement {
  connectedCallback() {
    const user = auth.getCurrentUser();

    this.innerHTML = `
      &lt;h1&gt;Dashboard&lt;/h1&gt;

      &lt;div class=&quot;widgets&quot;&gt;
        &lt;metrics-chart&gt;&lt;/metrics-chart&gt;
        &lt;recent-activity&gt;&lt;/recent-activity&gt;

        ${rbac.can(user, &#039;view-analytics&#039;) ? `
          &lt;analytics-panel&gt;&lt;/analytics-panel&gt;
        ` : &#039;&#039;}

        ${rbac.can(user, &#039;manage-users&#039;) ? `
          &lt;user-management&gt;&lt;/user-management&gt;
        ` : &#039;&#039;}
      &lt;/div&gt;
    `;
  }
}</code></pre>
<h2>Lessons Learned</h2>
<p>Building real applications with LARC teaches valuable lessons:</p>
<li><strong>Start simple</strong>: Begin with basic components and add complexity as needed.</li>
<li><strong>Use the PAN bus liberally</strong>: It's cheap and powerful. When in doubt, publish an event.</li>
<li><strong>Embrace the platform</strong>: Native APIs are well-optimized. Use fetch, not axios. Use template literals, not a template library.</li>
<li><strong>Think in components</strong>: Small, focused components are easier to test, reuse, and understand.</li>
<li><strong>Test early</strong>: Writing tests as you build prevents painful debugging later.</li>
<li><strong>Profile before optimizing</strong>: Measure performance before assuming where bottlenecks are.</li>
<li><strong>Document as you go</strong>: Future you will thank present you.</li>
<li><strong>Progressive enhancement</strong>: Build core functionality first, then enhance for modern browsers.</li>
<hr>
<h1>Appendices</h1>
<h2>Appendix A: Web Components API Reference</h2>
<h3>Custom Elements</h3>
<strong>Defining elements:</strong>
<pre><code class="language-javascript">customElements.define(&#039;my-element&#039;, MyElement);
customElements.define(&#039;my-element&#039;, MyElement, { extends: &#039;button&#039; });</code></pre>
<strong>Retrieving definitions:</strong>
<pre><code class="language-javascript">customElements.get(&#039;my-element&#039;);  // Returns constructor or undefined
await customElements.whenDefined(&#039;my-element&#039;);  // Resolves when defined
customElements.upgrade(element);  // Upgrade an element</code></pre>
<h3>Lifecycle Callbacks</h3>
<p>| Callback | When Called |
|----------|-------------|
| <code>constructor()</code> | Element created |
| <code>connectedCallback()</code> | Element added to DOM |
| <code>disconnectedCallback()</code> | Element removed from DOM |
| <code>attributeChangedCallback(name, oldVal, newVal)</code> | Observed attribute changed |
| <code>adoptedCallback()</code> | Element moved to new document |</p>
<h3>Shadow DOM</h3>
<pre><code class="language-javascript">// Attach shadow root
const shadow = element.attachShadow({ mode: &#039;open&#039; });

// Access shadow root
element.shadowRoot  // null if mode is &#039;closed&#039;

// Slots
const slot = shadow.querySelector(&#039;slot&#039;);
slot.assignedNodes();  // All assigned nodes
slot.assignedElements();  // Only element nodes</code></pre>
<h2>Appendix B: PAN Bus API Reference</h2>
<h3>Publishing</h3>
<pre><code class="language-javascript">// Simple publish
pan.publish(&#039;topic&#039;, data);

// With options
pan.publish(&#039;topic&#039;, data, { retained: true });</code></pre>
<h3>Subscribing</h3>
<pre><code class="language-javascript">// Subscribe
const unsubscribe = pan.subscribe(&#039;topic&#039;, (data) =&gt; {
  console.log(data);
});

// Wildcard subscribe
pan.subscribe(&#039;user.*&#039;, (data, topic) =&gt; {
  console.log(topic, data);
});

// Unsubscribe
unsubscribe();</code></pre>
<h3>Request/Response</h3>
<pre><code class="language-javascript">// Request with timeout
const result = await pan.request(&#039;service.getData&#039;, { id: 1 }, 5000);

// Respond to requests
pan.respond(&#039;service.getData&#039;, async ({ id }) =&gt; {
  return await fetchData(id);
});</code></pre>
<h2>Appendix C: Component Quick Reference</h2>
<p>| Component | Purpose | Key Attributes |
|-----------|---------|----------------|
| <code>pan-router</code> | Client-side routing | <code>base</code> |
| <code>pan-route</code> | Route definition | <code>path</code>, <code>component</code> |
| <code>pan-store</code> | State management | <code>persist</code>, <code>namespace</code> |
| <code>pan-fetch</code> | Data fetching | <code>url</code>, <code>method</code>, <code>auto</code> |</p>
<h2>Appendix D: Migration Cheat Sheet</h2>
<h3>React → LARC</h3>
<p>| React | LARC |
|-------|------|
| JSX | Template literals |
| <code>props</code> | Attributes/properties |
| <code>useState</code> | Instance properties |
| <code>useEffect</code> | <code>connectedCallback</code> |
| Context | PAN bus |
| Redux | <code>pan-store</code> |</p>
<h3>Vue → LARC</h3>
<p>| Vue | LARC |
|-----|------|
| Templates | Template literals |
| <code>v-if</code> | Ternary in template |
| <code>v-for</code> | <code>array.map()</code> |
| <code>computed</code> | Getters |
| Vuex | <code>pan-store</code> |</p>
<h2>Appendix E: Resources</h2>
<h3>Official</h3>
<ul><li>Documentation: https://larcjs.com/docs</li>
<li>GitHub: https://github.com/larcjs/larc</li>
<li>Examples: https://github.com/larcjs/larc/tree/main/packages/examples</li>
</ul>
<h3>Web Standards</h3>
<ul><li>MDN Web Components: https://developer.mozilla.org/en-US/docs/Web/Web_Components</li>
<li>Custom Elements Spec: https://html.spec.whatwg.org/multipage/custom-elements.html</li>
<li>Shadow DOM Spec: https://dom.spec.whatwg.org/#shadow-trees</li>
</ul>
<h3>Community</h3>
<ul><li>Discord: https://discord.gg/larc</li>
<li>Forum: https://forum.larcjs.com</li>
</ul>
      </article>
      <footer class="docs-footer">
        <a href="https://github.com/chrisrobison/pan/edit/main/books/learning-larc/chapters/19-real-world-applications.md" target="_blank">
          Edit this page on GitHub
        </a>
      </footer>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha384-F/bZzf7p3Joyp5psL90p/p89AZJsndkSoGwRpXcZhleCWhd8SnRuoYo4d0yirjJp" crossorigin="anonymous"></script>
  <script src="../assets/docs.js"></script>
</body>
</html>