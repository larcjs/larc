class s extends HTMLElement{static observedAttributes=["theme"];constructor(){super(),this.attachShadow({mode:"open"}),this._theme="auto",this._systemTheme=this._getSystemTheme(),this._mediaQuery=null}connectedCallback(){this.render(),this._setupSystemThemeListener(),this._applyTheme(),this._broadcastThemeChange()}disconnectedCallback(){this._mediaQuery&&this._mediaQuery.removeEventListener("change",this._handleSystemThemeChange)}attributeChangedCallback(e,h,t){e==="theme"&&h!==t&&(this._theme=t||"auto",this._applyTheme(),this._broadcastThemeChange())}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: none;
        }
      </style>
    `}_getSystemTheme(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}_setupSystemThemeListener(){typeof window>"u"||(this._mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this._handleSystemThemeChange=this._handleSystemThemeChange.bind(this),this._mediaQuery.addEventListener("change",this._handleSystemThemeChange))}_handleSystemThemeChange(e){this._systemTheme=e.matches?"dark":"light",this._broadcast("theme.system-changed",{theme:this._systemTheme}),this._theme==="auto"&&(this._applyTheme(),this._broadcastThemeChange())}_getEffectiveTheme(){return this._theme==="auto"?this._systemTheme:this._theme}_applyTheme(){const e=this._getEffectiveTheme();document.documentElement.setAttribute("data-theme",e),document.documentElement.style.colorScheme=e}_broadcastThemeChange(){this._broadcast("theme.changed",{theme:this._theme,effective:this._getEffectiveTheme()})}_broadcast(e,h){const t=document.querySelector("pan-bus");t&&t.publish(e,h),this.dispatchEvent(new CustomEvent("theme-change",{bubbles:!0,composed:!0,detail:h}))}setTheme(e){["light","dark","auto"].includes(e)&&this.setAttribute("theme",e)}getTheme(){return this._theme}getEffectiveTheme(){return this._getEffectiveTheme()}getSystemTheme(){return this._systemTheme}}customElements.define("pan-theme-provider",s);export{s as PanThemeProvider};
