import{PanClient as d}from"../../../core/pan-client.mjs";class i extends HTMLElement{pc=new d(this);items=[];connectedCallback(){const s=()=>{this.pc.subscribe("todos.change",t=>{this.items.push(t.data.item),this.#t()}),this.pc.subscribe("todos.remove",t=>{this.items=this.items.filter(e=>e.id!==t.data.id),this.#t()}),this.pc.subscribe("todos.toggle",t=>{const e=this.items.find(o=>o.id===t.data.id);e&&(e.done=!!t.data.done),this.#t()}),this.#t()};window.__panReady?s():document.addEventListener("pan:sys.ready",s,{once:!0})}#t(){this.pc.publish({topic:"todos.state",data:{items:this.items},retain:!0})}}customElements.define("todo-provider",i);var c=i;export{c as default};
