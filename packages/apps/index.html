<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LARC Demo Apps - v2</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-primary: #ffffff;
      --bg-secondary: #f8fafc;
      --bg-tertiary: white;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --border-color: #e2e8f0;
      --active-bg: #eff6ff;
      --accent-color: #06b6d4;
      --accent-dark: #0891b2;
    }

    [data-theme="dark"] {
      --bg-primary: #0f172a;
      --bg-secondary: #1e293b;
      --bg-tertiary: #334155;
      --text-primary: #e2e8f0;
      --text-secondary: #94a3b8;
      --border-color: #334155;
      --active-bg: #1e3a5f;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .header {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      color: white;
      padding: 1rem 1.5rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header h1 {
      font-size: 1.5rem;
      font-weight: 600;
    }

    .header-links {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .header-links a {
      color: white;
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      background: rgba(255, 255, 255, 0.1);
      transition: background 0.2s;
    }

    .header-links a:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .theme-toggle {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s;
    }

    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .container {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    .sidebar {
      width: 300px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-color);
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .sidebar-header {
      padding: 1rem;
      border-bottom: 1px solid var(--border-color);
      background: var(--bg-tertiary);
    }

    .sidebar-header h2 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .sidebar-header p {
      font-size: 0.875rem;
      color: var(--text-secondary);
      line-height: 1.4;
    }

    .gallery-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.875rem 1rem;
      cursor: pointer;
      border-bottom: 1px solid var(--border-color);
      transition: all 0.2s;
      color: var(--text-primary);
      background: var(--bg-tertiary);
      font-weight: 600;
    }

    .gallery-item:hover {
      background: var(--bg-secondary);
      padding-left: 1.25rem;
    }

    .gallery-item.active {
      background: var(--active-bg);
      border-left: 3px solid var(--accent-color);
    }

    .gallery-item .app-icon {
      font-size: 1.5rem;
    }

    .gallery-item .app-name {
      color: var(--text-primary);
    }

    .gallery-item.active .app-name {
      color: var(--accent-color);
    }

    .apps-list {
      flex: 1;
      overflow-y: auto;
    }

    .app-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.875rem 1rem;
      cursor: pointer;
      border-bottom: 1px solid var(--border-color);
      transition: all 0.2s;
      text-decoration: none;
      color: var(--text-primary);
    }

    .app-item:hover {
      background: var(--bg-tertiary);
      padding-left: 1.25rem;
    }

    .app-item.active {
      background: var(--active-bg);
      border-left: 3px solid var(--accent-color);
      font-weight: 600;
    }

    .app-icon {
      font-size: 1.5rem;
      min-width: 2rem;
    }

    .app-info {
      flex: 1;
      min-width: 0;
    }

    .app-name {
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .app-item.active .app-name {
      color: var(--accent-color);
    }

    .app-desc {
      font-size: 0.75rem;
      color: var(--text-secondary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .content {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: var(--bg-primary);
    }

    .iframe-toolbar {
      padding: 0.75rem 1rem;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .current-app {
      flex: 1;
      font-weight: 600;
      color: var(--text-primary);
    }

    .toolbar-buttons {
      display: flex;
      gap: 0.5rem;
    }

    .toolbar-btn {
      padding: 0.375rem 0.75rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 0.375rem;
      cursor: pointer;
      font-size: 0.875rem;
      transition: all 0.2s;
      color: var(--text-primary);
    }

    .toolbar-btn:hover {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    iframe {
      flex: 1;
      border: none;
      background: var(--bg-primary);
    }

    .gallery-view {
      flex: 1;
      overflow-y: auto;
      padding: 2rem;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .app-card {
      background: var(--bg-secondary);
      border: 2px solid var(--border-color);
      border-radius: 1rem;
      padding: 1.5rem;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .app-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      border-color: var(--accent-color);
    }

    .card-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    .card-name {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .card-description {
      font-size: 0.875rem;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .card-features {
      list-style: none;
      padding: 0;
      margin: 0 0 1rem 0;
      font-size: 0.75rem;
      color: var(--text-primary);
    }

    .card-features li {
      padding: 0.25rem 0;
      padding-left: 1.25rem;
      position: relative;
    }

    .card-features li:before {
      content: "‚úì";
      position: absolute;
      left: 0;
      color: var(--accent-color);
      font-weight: bold;
    }

    .card-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.625rem 1.25rem;
      background: var(--accent-color);
      color: white;
      text-decoration: none;
      border-radius: 0.375rem;
      font-weight: 600;
      font-size: 0.875rem;
      transition: all 0.2s ease;
    }

    .card-link:hover {
      background: var(--accent-dark);
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üì¶ LARC Demo Apps</h1>
    <div class="header-links">
      <a href="/examples/examples/viewer.html">Examples Viewer</a>
      <a href="/examples/examples/index.html">Gallery View</a>
      <button class="theme-toggle" onclick="toggleTheme()" id="themeToggle">üåô</button>
    </div>
  </div>

  <div class="container">
    <aside class="sidebar">
      <div class="apps-list" id="appsList">
        <!-- Apps will be inserted here -->
      </div>
    </aside>

    <main class="content" id="mainContent">
      <div class="gallery-view" id="galleryView">
        <div class="gallery-grid" id="galleryGrid">
          <!-- App cards will be inserted here -->
        </div>
      </div>
    </main>
  </div>

  <script>
    const apps = [
      {
        icon: 'üìÑ',
        name: 'Invoice Studio',
        path: 'invoice-studio/index.html',
        description: 'Professional invoice management system with advanced features.',
        features: [
          'ContentEditable invoice fields',
          'Auto-calculating line items',
          'Contact management system',
          'IndexedDB persistence',
          'PDF export with jsPDF'
        ]
      },
      {
        icon: 'üìù',
        name: 'Markdown Notes',
        path: 'markdown-notes/index.html',
        description: 'Full-featured markdown editor with live preview and file management.',
        features: [
          'Rich markdown editor',
          'Live preview toggle',
          'OPFS file storage',
          'Keyboard shortcuts',
          'Export to .md files'
        ]
      },
      {
        icon: 'üë•',
        name: 'Contact Manager',
        path: 'contact-manager/index.html',
        description: 'Modern contact management with search and filtering.',
        features: [
          'Add/edit/delete contacts',
          'Real-time search',
          'Tag management',
          'IndexedDB persistence',
          'Import/Export CSV'
        ]
      },
      {
        icon: 'üßæ',
        name: 'Invoice Creator',
        path: 'invoice/index.html',
        description: 'Streamlined invoice creation for independent contractors.',
        features: [
          'ContentEditable fields',
          'Auto-calculating items',
          'Multiple invoices',
          'Auto-save',
          'Print-optimized'
        ]
      },
      {
        icon: 'üìä',
        name: 'Data Browser',
        path: 'data-browser/index.html',
        description: 'Browse and visualize data with interactive tables.',
        features: [
          'Sortable data tables',
          'Interactive charts',
          'Export to CSV/JSON',
          'Real-time updates',
          'Responsive design'
        ]
      }
    ];

    let currentView = 'gallery';

    function renderSidebar() {
      const list = document.getElementById('appsList');
      list.innerHTML = `
        <div class="gallery-item ${currentView === 'gallery' ? 'active' : ''}" onclick="showGallery()">
          <div class="app-icon">üì¶</div>
          <div class="app-info">
            <div class="app-name">Demo Apps Gallery</div>
          </div>
        </div>
      ` + apps.map(app => `
        <div class="app-item" data-path="${app.path}" onclick="loadApp('${app.path}', '${app.name}')">
          <div class="app-icon">${app.icon}</div>
          <div class="app-info">
            <div class="app-name">${app.name}</div>
            <div class="app-desc">${app.description}</div>
          </div>
        </div>
      `).join('');
    }

    function renderGallery() {
      const grid = document.getElementById('galleryGrid');
      grid.innerHTML = apps.map(app => `
        <div class="app-card" onclick="loadApp('${app.path}', '${app.name}')">
          <div class="card-icon">${app.icon}</div>
          <h3 class="card-name">${app.name}</h3>
          <p class="card-description">${app.description}</p>
          <ul class="card-features">
            ${app.features.map(f => `<li>${f}</li>`).join('')}
          </ul>
          <a href="${app.path}" class="card-link" onclick="event.preventDefault(); event.stopPropagation(); loadApp('${app.path}', '${app.name}')">
            Launch App ‚Üí
          </a>
        </div>
      `).join('');
    }

    function loadApp(path, name) {
      const mainContent = document.getElementById('mainContent');
      const galleryView = document.getElementById('galleryView');

      if (currentView === 'gallery') {
        // Switch to iframe view
        galleryView.style.display = 'none';
        mainContent.innerHTML = `
          <div class="iframe-toolbar">
            <div class="current-app">${name}</div>
            <div class="toolbar-buttons">
              <button class="toolbar-btn" onclick="reloadIframe()">üîÑ Reload</button>
              <button class="toolbar-btn" onclick="openInNewTab()">üîó Open</button>
            </div>
          </div>
          <iframe id="appFrame" src="${path}"></iframe>
        `;
        currentView = 'iframe';
        window.currentAppPath = path;
      } else {
        // Update iframe
        const iframe = document.getElementById('appFrame');
        const toolbar = document.querySelector('.current-app');
        iframe.src = path;
        toolbar.textContent = name;
        window.currentAppPath = path;
      }

      // Update active state
      document.querySelectorAll('.app-item').forEach(item => {
        item.classList.remove('active');
        if (item.dataset.path === path) {
          item.classList.add('active');
        }
      });
      document.querySelectorAll('.gallery-item').forEach(item => {
        item.classList.remove('active');
      });
    }

    function showGallery() {
      const mainContent = document.getElementById('mainContent');
      mainContent.innerHTML = `
        <div class="gallery-view" id="galleryView">
          <div class="gallery-grid" id="galleryGrid"></div>
        </div>
      `;
      currentView = 'gallery';
      renderGallery();
      renderSidebar();

      // Update active state
      document.querySelectorAll('.app-item').forEach(item => {
        item.classList.remove('active');
      });
    }

    function reloadIframe() {
      const iframe = document.getElementById('appFrame');
      if (iframe) {
        iframe.src = iframe.src;
      }
    }

    function openInNewTab() {
      if (window.currentAppPath) {
        window.open(window.currentAppPath, '_blank');
      }
    }

    // Theme toggle
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      const themeToggle = document.getElementById('themeToggle');

      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      themeToggle.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    }

    // Initialize theme
    function initTheme() {
      const savedTheme = localStorage.getItem('theme');
      const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
      const themeToggle = document.getElementById('themeToggle');

      if (theme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeToggle.textContent = '‚òÄÔ∏è';
      }
    }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (currentView === 'iframe' && (e.key === 'ArrowDown' || e.key === 'ArrowUp')) {
        e.preventDefault();
        const items = Array.from(document.querySelectorAll('.app-item'));
        const currentIndex = items.findIndex(item => item.classList.contains('active'));

        let nextIndex;
        if (e.key === 'ArrowDown') {
          nextIndex = currentIndex < items.length - 1 ? currentIndex + 1 : 0;
        } else {
          nextIndex = currentIndex > 0 ? currentIndex - 1 : items.length - 1;
        }

        if (items[nextIndex]) {
          const path = items[nextIndex].dataset.path;
          const name = items[nextIndex].querySelector('.app-name').textContent;
          loadApp(path, name);
          items[nextIndex].scrollIntoView({ block: 'nearest', behavior: 'smooth' });
        }
      }
    });

    // Initialize
    window.addEventListener('load', () => {
      initTheme();
      renderSidebar();
      renderGallery();
    });
  </script>
</body>
</html>
